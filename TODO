IVERSON - BEFORE FINAL

shared worker
- release beta without multileague support?
  - league.disconnect has some stuff which needs to run in beforeView.beforeNonLeague
  - any race condition if load two tabs at same time?
  - benchmark
- need to track hostID or pass port around, through gameSim and stuff
  - solution eventually needs to handle multi-league case. all new stuff should be namespaced
  - new League(lid), then everything inside is the same? or pass lid and hostID to individual functions?
- namespace stuff, after it's working for one league
  - attach lid to promiseWorker instance in host (call it "metadata"), update lid if it changes, and attach to every request from host
    - then from worker, pass into toUI
  - query API: flag to determine if broadcast or single response. default single response. optional last arg, so single response use case is same API as now
    - if broadcast, then response is always undefined
    - broadcast needs to be namespaced, too. like only "update all league 5" not "update all tabs open in every league"
      - figure out some way to abstract... like maybe a conditional broadcast function defined based on metadata
  - namespace leagues (or force only one league)
    - namespace locks, g (in worker only), idb.league, and idb.cache
    - all common functions, accept g as param
    - something to handle init/close of tabs
    - in worker, store all ports along with hostID (incrementing integer) and lid. then can send either to specific window (how?) or to all in league
      - need some way to register this info with the worker. it gets the port in onconnect, and then in response can send hostID back to host. finally, host can send lid on that port via some special message
    - send message from worker - broadcast vs individual host
      - requires hostID sent to host and included with each message, or can it rely on port sent along with message even in which case maybe sending hostID back to host on init is not required?
    - some toUI ones require a response, and also need to send bbgmPing/notifyError/showAd to individual tab
      - look at all toUI calls
- after it's working
  - is there a race condition where host can query worker before host knows its hostID? might not matter if it's only init
  - benchmark
  - disconnect league only when none are left registered to promise worker (so need api to get all metadata)
  - location var inside shared worker?
  - when closing tab, how to forget port? http://stackoverflow.com/questions/13662089/javascript-how-to-know-if-a-connection-with-a-shared-worker-is-still-alive
  - split promise-worker-bi into two classes, sharing some base class
    - register function doens't need to recieve hostID and metadata on host
  - test live gamesim
  - rethink account.check

minor bugs
- once players retire, they disappear from draft summary
- draft picks too valuable in trading block - can repeatedly trade 2nd round pick for two 2nd round picks

mozilla glitches https://www.reddit.com/r/BasketballGM/comments/5zgrv9/basketball_gm_40_beta/dez4upt/

is it too fast? artificially slow down?
- if not, revamp notifications
- could also make it configurable, some users might want it slower

force single tab per league
- when < 5 seconds, wait for another heartbeat before deciding
- check for collission in setInterval, and somehow show error page if that happens

minify is broken
- disable mangle and compress, still broken. maybe just fuck it, who cares

Email users after bbgm update. But first allow opt out on register

get rid of debug mode info in manual

blog post
- tradeoffs due to chrome changing
- new tradeoffs for cross tab play
- cache and worker
- cache underwhelming
- promise-worker-bi
- worker microtask issues
- safari

followup blog posts
- user metrics after performance increase

4.0
- tag w/ npm version
- changes

IVERSON - EVENTUALLY

Triggers: the sim stops if different situations happen. This may include injuries, bad streaks, reaching a certain amount of wins/losses... https://www.reddit.com/r/BasketballGM/comments/5zgrv9/basketball_gm_40_beta/dez5jn4/
- "Play until..." menu item

when dirty on close, show warning window, and initiate flush (if not already in progress)
- hard to coordinate across UI and worker...

better loading screen, after React takes control but before initial page is rendered - because it can be slow for loading a league

index updating
- stupid option: parameter in put saying "skip index update"
- smarter option: test if object === prev object on put, and if so, skip write and indexing (only if we leave markDirtyIndexes behind), just mark record as dirty
- smarter option: know what fields the index is on, and test if they changed. if so, re-index
- smartest option: as above, but incrementally update index
- goal: get rid of markDirtyIndexes calls in application code

Last update time could be computed in flush if necessary

uncomment things using localstorage in worker, after moving to either env+api or idb (meta)
- top16playoffs - used in both, would be better in gameAttributes as a God Mode option

run tests from cache
- getCopies.teams
- util.account
- unskip player.generate test
- delete meta database after league tests (and others that create it)

this shit is UGLY UGLY UGLY, fix ASAP!!!
    if (typeof it === 'function') { return; }
  http://railsware.com/blog/2017/01/10/mocking-es6-module-import-without-dependency-injection/

unify build and watch scripts - use watchify programmatically

lint tests

flow tests

rethink cache API, with goal of having it typed
- rename indexes, store prefixed with storename
- get rid of new any types in types.js

Exceptions should be exceptional. Are my user facing ones?

error page (like invalid pid) should show league UI if in league

does beforeView stuff always need to go back to worker? only if switching leagues, maybe?

should checks to update data in worker/views be in worker, or could they be in UI somehow and avoid call to worker if update not needed?

restore runWhenever ability (really necessary? was only used in gameLog)

setState was used in schedule so old completed games don't temporarily show when switching team. still an issue? if not, get rid of setStateData completely

test all instances of fetchWrapper
- login/logout/register work, but persisting login over reloads doesn't
- others?

bbgm.g.cache.flush().then(() => console.log('done'));
fucked = false; Object.values(bbgm.g.cache.indexes.teamSeasonsBySeasonTid).forEach((ts) => { if (ts.hasOwnProperty('ast')) { console.log(ts); fucked = true } }); if (fucked) { throw new Error('FUCK'); }
bbgm.league.setGameAttributes({phaseChangeInProgress: false})

getCopy.players use only where needed for input to player.filter
- abstract season logic from leaders/playerRatings, use in stats pages too (plus a bit extra, for ones showing draft prospects too)

try moving stats back within players

if i can gracefully handle absence of g.season etc, put cache creation inside connectLeague
- not graceful now, see fill(season)

get tests working
- db.getCopy.teams
  - operate on individual functions? can export them just for tests
  - confirm operations that don't require IDB
  - confirm getAll updates from cache
- a lot of tests could run just from cache, no IDB

player.sign, like player.addToFreeAgents to encapsulate tid changes

how do caches based on g.season work in preseason?

refactor
- clear, delete need to handle indexes

document cache data format and API!
- different things are cached, depending on object store
- all modifications go into cache
- cache mutations are dangerous, see getCopy
- read from just the cache if you're sure everything is there (like an active player). otherwise, read from db and augment with cache (because anything could be in cache, even if it's not normally.. like retired player added to watch list). getCopy variables do this
- promise microtask worker crap - for firefox support, if you start a backboard tx manually, you can't do any promise/asyncawait stuff inside the callback

league creation
- reading from league file

debug mode makes huge perf difference
- warning bar
- is this still true?

make cache synchronous? it'll be faster, any problems though?
- won't be able to wait while flushing

revisit lock system

benchmark using proxies to detect change in index stuff rather than dirtyIndexes

can ui/util/logEvent be replaced by just notify? since it never writes to db?

----

service worker
- sw-offline-google-analytics
- https://github.com/GoogleChrome/lighthouse

put death rate in god mode options

HTML in play by play https://www.reddit.com/r/BasketballGM/comments/5963ym/playbyplay_bug/

https://www.reddit.com/r/BasketballGM/comments/57cux2/small_issue/

redo contracts after free agency ends

rewrite notify.js in React

god mode should have no restrictions on adding players to trade (like 15 days after signing)

Trade/Signing Negotiation Difficulty - Have from a scale of 1-100. 1 = Signing players will be easy and salary dump trades. 100 = Most players ask for max contracts, and trading and salary dumps will be harder. 50 = Normal

flow
  backboard
    BackboardTx should specify object stores
    should somehow specify contents of object stores
  cache - similar issue as backboard, would be great to type inputs and outputs
  get rid of ScheduleGame.highlight
  in withStats, how to convert input obj of type Player to output obj of type PlayerWithStats
  get rid of any, Object, etc
  ESLint
  React components: proptype validation only works for class-based ones. for functions, need proptypes and flow. even for class-based components, flow can give more flexibility, but does not do runtime checking. https://github.com/gcanti/babel-plugin-tcomb could help with that, but seems to create too many false positives. until there is a better solution, it's not urgent to port React components to flow.
    https://codemix.github.io/flow-runtime/
  views: thru live
  views/views

replace owner message text with numbers/chart

upgrade GA https://developers.google.com/analytics/devguides/collection/upgrade/
  bbgm web too
    jekyll - too complicated
    hexo - too opinionated/idiosyncratic
    metalsmith - ??
    phenomic - kind of nice, but maybe unstable and tricky deployment

---

REACT later

close menu on responsive navbar https://github.com/react-bootstrap/react-bootstrap/issues/1301 resolved by https://github.com/react-bootstrap/react-bootstrap/pull/2280

sorting
  react dnd
  rubaxa
    maybe https://github.com/cheton/react-sortable
  dragula

Draft button on player pages https://www.reddit.com/r/BasketballGM/comments/53op85/feature_request/

redux or similar for state
  https://www.reddit.com/r/javascript/comments/53ja6l/redux_patterns_and_antipatterns/

keep showing splash screen until first view hydrated

reevaluate views folder structure... maybe views -> ui, and views/*.js -> ui/data-loaders/*.js
reevaluate bbgmView API

abstract games list in schedule and dashboard

DataTable
  USE FOR OTHER TABLES TOO, not just sortable ones. will be nice for colnames, especially
  https://github.com/rwu823/react-addons-text-content/issues/1 prevents sorting by skills on draft summary
    for now, pass sort key as child and it works
  Fancy features
    CSV export
    show/hide columns
    filtering

Trade
  could be cleaned up a lot

Draft
  make it cooler
  fantasy draft is hacky and glitchy - do better!
    https://www.reddit.com/message/messages/6ip35c

---

bundle-collapser

home court advantage should be based on seed, not record https://www.reddit.com/r/BasketballGM/comments/4xf5ik/minor_bug/

change max roster size https://www.reddit.com/r/BasketballGM/comments/554dly/maximum_of_roster_spots/

pressing alt+p rapidly can result in extra games being played

filters on event log
  tragic deaths https://www.reddit.com/r/BasketballGM/comments/52ljuy/would_it_be_possible_to_add_a_memorial_page/d7ou7ov?context=3

more keyboard shortcuts https://www.reddit.com/r/BasketballGM/comments/531utg/incredible_game_a_few_suggestions/

make positions edited in god mode sticky, like custom roster

different height distributions by country https://www.reddit.com/message/messages/644he7
  even global setting would be nice, for country specific leagues

make FAs less eager to sign with bad teams
  alternative idea to just threshold: https://www.reddit.com/r/nba/comments/4tfaph/i_made_basketball_gm_a_free_basketball_management/d5hqqal

display numerical owner mood somehow

AI trades

all time leaders https://www.reddit.com/r/BasketballGM/comments/4qjkys/simple_feature_suggestion_all_time_season/

seasons in header of team finances salaries table do not update when season changes

refuse to sign in god mode https://www.reddit.com/r/BasketballGM/comments/4p2s1q/cant_sign_star_player/

newScheduleCrappy should be better

better salary AI
  old players undervalued
  dynamically set based on cap space
  https://www.reddit.com/r/gamedev/comments/4omk8h/simulating_marketbased_pricing/
  FAs less likely to sign https://www.reddit.com/r/BasketballGM/comments/4qla6t/free_agent_mood/d4ww715?context=3

international names
  accurate faces (race)
  in player ratings table, show country abbrevs not full names

required babel transforms
  transform-es2015-block-scoping
    needed for firefox https://bugzilla.mozilla.org/show_bug.cgi?id=449811
  transform-async-to-generator
    needed until there is better native support for promises and indexeddb interaction
  all others
    http://stackoverflow.com/a/36824024/786644

backboard
  investigate backboard tx canceling error propagation, see tx in newPhase. maybe interaction between promise manually being 
  player.withStats native support

new achievement for winning as 8 seed https://www.reddit.com/r/BasketballGM/comments/4l2arh/new_achievement_suggestion/

on new league, when play to regular season, message appears in inbox but does not show up on dashboard

god mode option for playoff rounds https://www.reddit.com/r/BasketballGM/comments/44hdzs/new_options_in_god_mode/czrxv2w?context=3

high 2nd round picks should be more likely to succeed

substitutions fucked up in long games https://www.reddit.com/r/BasketballGM/comments/44nv0s/100000_minute_quarters/

league leaders should average more assists/rebounds

injuries on player page https://www.reddit.com/r/BasketballGM/comments/43jj76/injuries_can_have_longterm_effects/czinyzk

more detailed negotiation screen https://www.reddit.com/r/BasketballGM/comments/416o5g/well_this_is_new/cz11w9v?context=3

delete most negotiation code
  remove restriction for one negotiation at a time
    make sure re-signing is handled okay still
    make sure multi team mode is handled okay still
    get rid of negotiations object store

service worker to repalce appcache
  harder than it would appear, see branch

get rid of everything in lib folder. either install from npm or create npm packages

CI, dep version checking, etc

CURRENT
-------

bold highest values in career on player stats tables like wikipedia https://www.reddit.com/r/BasketballGM/comments/4rgn0p/two_statrelated_suggestions/

pages for each playoff series https://www.reddit.com/r/BasketballGM/comments/4qjahi/minor_suggestion_generate_separate_pages_for_each/

old draft picks should be purged https://www.reddit.com/r/BasketballGM/comments/4nfesy/guys_staying_past_their_deadline_bugs/d43wbpc?context=3

Add 'Free Agents' to 'Teams' dropdown menu on 'Player Ratings' page. https://www.reddit.com/r/BasketballGM/comments/3t4kl6/suggestion_add_free_agents_to_teams_dropdown_menu/

"resign all" button https://www.reddit.com/r/BasketballGM/comments/40q8rc/help_beta_test_new_contract_negotiation_feature/cywki5q

https://www.reddit.com/r/BasketballGM/comments/3se2v7/two_small_bugs/

team dropdown in dashboard

feats table should show both playoffs and regular season by default

https://www.reddit.com/r/BasketballGM/comments/3gjqgd/lets_brainstorm_a_bit_about_this_30_seasons/

fantasy draft summary https://www.reddit.com/r/BasketballGM/comments/3g4p5a/issues_with_fantasy_draft_records/ (link is in player transactions)

crime https://www.reddit.com/r/BasketballGM/comments/3g1ngn/its_2015/ctudznu

potential over 100 https://www.reddit.com/r/BasketballGM/comments/3ft6q8/player_with_potential_over_100/

separate advanced stats table in player page, so there is room for everything in screenshots

different jump to menus for season and team specific pages?
  or unify
  add gamelog, roster, team finances
    get rid of "More:" links

gamesim rewrite
  game situation awareness (blowouts, close games, etc)
  balance
  minutes directly, not by +/-

owner message bug: https://www.reddit.com/r/BasketballGM/comments/3fl46t/broken_owner/ctqfr1y

use positions for roster building and rotations
  free agents and trades matters....
  bump up penalties for unbalanced teams
    the tricky part is that finding a factor and using it to create variance leads to variance on the CPU-generated teams
    could play with turnover probability too
    rewrite gamesim, fixing all these problems? also, coaching less agressively when game is blowout, playing stars more in important games, ...
    tricky: good teams have high skill players, who are going to do really well in any synergy metric. so it's hard to punish unbalanced teams through synergy without decreasing parity by a lot
      hacky approach: stay with something similar to current system, but with an extra penalty for very unbalanced teams (could be sigmoidal so it only affects really poorly balanced teams)
    probably will need to increase synergyFactor
    might need to tweak some probabilities if this changes stats too much
    redo ovr formula

Make AI smarter when constructing teams. Then, if that works, make synergy more impactful

Too many 8 seeds winning over 1 seeds
  http://www.reddit.com/r/BasketballGM/comments/39j6gy/this_happens_way_too_often/cs4lor3
  http://www.reddit.com/r/BasketballGM/comments/391et4/1v8_seed_theory_100_years_of_simulation/
  point differential stuff - BBGM teams seem better than NBA teams, but still lose in 8-1 (and have worse records)
    some of this could be running up the score against bad teams

most improved player award

player development growth curve projection

balance http://www.reddit.com/r/BasketballGM/comments/3759dw/guide_to_winning_70_games_consistently/crls9b1?context=3

playoff and regular season playing time and injury differences http://www.reddit.com/r/BasketballGM/comments/38f7dj/playoff_variance_seems_a_little_high/crxh643

when retired, player page (and other career-level things) should display most common pos, or maybe composite that us union of all positions (like GF for someone who was both SG and SF)
  draftSummary, hallOfFame, player, playerStats (careerTotals), teamHistory, anything else?

Exclude assets from AI trade offers http://www.reddit.com/r/BasketballGM/comments/336nzr/trade_ui_redesign/crawmjy?context=3

delete old data bug http://www.reddit.com/r/BasketballGM/comments/39mi4p/bug_pers_roughly_double_after_deleting_unnotables/cs8difx?context=3

roster should more clearly show who has a non-guaranteed contract https://www.reddit.com/r/BasketballGM/comments/3d194k/non_guarantee_contracts/

Chrome delete data http://www.reddit.com/r/BasketballGM/comments/35eyq6/cant_store_anymore_data_on_chromebook/cr46zch?context=3

no/fuzzier ratings mode http://www.reddit.com/r/BasketballGM/comments/35qftt/statsonly_modeless_accurate_stats/

revisit initial players http://www.reddit.com/r/BasketballGM/comments/35jb3w/why_is_there_a_player_age_limit_on_newly_created/

compact feats UI http://www.reddit.com/r/BasketballGM/comments/341k8e/can_we_have_statistical_achievements_sorted_by/
  add subtype or something to feats

store some data in memory
  goals
    playerStats first
    then non-retired players
    then teams
  method
    generic layer over IDB?
    wrapper function specific to how data is actually queried?
    need to flush to db some time?
    will inherently be more risky than using a "real" transaction, shit could get out of sync
  transaction management
    should be fine if the cache is synchronous
  multi-window
    service worker or shared worker
      but how do they use transactions?

in-memory cache
  when starting to play games (>1 day), "get" and "getAll" add object stores to cache (if they aren't already there) and "put" updates cached values and set marker saying they were updated
  When games are over, write to database any cached values that were updated
  what about other types of operations?
    iterate: maybe cache query and check for duplicate query? not sure. this is tricky
    others: maybe not needed for this application
  NEW PLAN - apply only to players
    writes to db (add, put, cursor.update) also write to cache (do clone before write)
    ObjectStore.get - read from cache first, only hit db if cache miss
    ObjectStore.getAll - read from db
    ObjectStore.openCursor - read from db
    Index.get - read from db
    Index.getAll - read from db (maybe special case for getting all based on single tid)
    Index.openCursor - read from db
  then teams cache - similar
  really, 2 paths forward:
    1. generic caching layer on top of IndexedDB (or my promises-based library) - maybe using fakeIndexedDB
    2. write more specific dao (like sdw) and write caching (or other) layer specific to that

refactor draft code

expansion/contraction

DEATH
  types
    plane crash (whole team, 1 every 200 years)
      give extra draft picks as compensation?
        what would the nba do?
      reset owner mood, new owner message

screenshot
  what do i link to? Imgur landing page? or include social links directly?
    include social links directly. actually that should be the first-level UI - you don't click "Screenshot" you click "Share to X" where X is Twitter, FB, Reddit, etc
      probably still save to imgur first
      autocomplete wording: "Draft players, manage teams, go for the championship. How good a Basketball GM are you? Find out at http://basketball-gm.com"
      also autocomplete hashtag
  add prompts to take screenshots at various points
  things can get cut off right, like wide tables in player pages

event tracking
  in addition to GA, have my own system that is more in depth
    tricky part: users who aren't logged in
  what else to track?

BBGM Gold?
  add achievement
  account page UI
    if user's account exists but has not been paid, should show warning and link to card update rather than stripe button
      if not cancelled but timestamp too low
  change basketball to gold coin
  http vs https URLs plan
    http version
      DONE New League button goes always to https
      DONE button linking to https after New League
      DONE account links always go to new version (make sure login persists, it seems to)
      DONE auto redirect to https if no leagues
      http version gets no more updates? would require splitting to another site on webfaction
      eventually could delete old version (would need GA-based evidence it's not used)
        could delete old upgrade code, 12 and older
    https version
      DONE button linking to http after New League
    redirect domain http to https: http://docs.webfaction.com/software/static.html#static-redirecting-from-http-to-https
      DONE for root
      remaining: beta, play, and account

league settings http://www.reddit.com/r/BasketballGM/comments/2xlqnp/request_allow_editing_of_salary_cap_numbers_in/

composite ratings / scouting report
  "Shooting", "PG Skills", "Paint Scoring", rebounding
    are these ones really complicated enough to warrant display?
  height trait http://www.reddit.com/r/BasketballGM/comments/2uccrl/viewable_composite_ratings_what_do_you_think/co7a4gr
    make it position-dependent.. but then should all this be position dependent?
  "The Shooting, Defense, and Style groups are the ones I'm finding Im paying most attention to"

draft classes being generated with the wrong season, leading to empty draft classes
  added back old hack to views/draft.js, but that is not satisfying

team and league records (highest scoring game, etc)
  http://www.reddit.com/r/BasketballGM/comments/2sl13h/many_people_have_requested_some_kind_of_all_time/
  show in
    player page
    team history page
    season summary page
  option to exclude notable games box scores from deletion

best stats for every player (e.g. most points in a game)
  could cache previous value from player objects when read in, and only write on new best

transaction log
  anything else to add or anywhere else to use this feature? ask
    big AI free agent signings
    team transactions page

phase changes in atomic transactions
  phaseChangeInProgress checks should be in same tx too!
  test
    UI and other glitches due to tx race conditions
  http://www.reddit.com/r/BasketballGM/comments/2yd2lb/the_curious_case_of_meddford_jones/

github
  bitbucket issues

THE FLATTENING
--------------

API design
  player.filter and team.filter should be renamed, otherwise it's confusing
    player.fitler -> player.process
    team.filter -> team.getAndProcess

after fully abstracting IndexedDB, could i improve performance by running it locally in node and using another database?
  same with mobile on phonegap
  same with web - "turbo mode" where only one window (db connection) is allowed and caching is heavy

PERFORMANCE CRAP
----------------

is iOS detector working? getting weird errors in logs

test!
  write unit tests for dao.players.getAll
    if you request a stats season that doesn't exist, does the callback still get executed?
    if no players are returned by query, does the callback still get executed?
    if filter removes all players, does the callback still get executed?

show "loading" indicator when uploading large file, otherwise seems to hang and not allow you to click
  should be some generic one, thin bar at top like youtube

deleteOldData
  is playerStats still most important? benchmark
  break up deletion of old ratings and stats?

player.updateValues.getStats doesn't really make sense. Should get all from past 2 seasons, sort by PSID, and take stats up to 2000 minutes

more database normalization? player ratings

PHASE TWO: store retired players in a different object store

PHASE THREE: store non-retired players and playerStats in memory
  PROBLEM: to do anything fancy with this, like avoiding writing to DB, it'd make multi-window play impossible
    https://groups.google.com/forum/#!topic/lovefield-users/Xs97HL4tDfk
  on page load, read all into g.playersCache and g.playerStatsCache
  dao.players.getAll can check the index and key properties to see if players are in memory. if so, skip IDB
  is it possible to abstract all IDB updating functions to copy to memory too? would just need wrappers around put (already have it) and cursor.update.
  g.playerStatsCache can be used to get stats to compute player.value, replacing current method

PLAYER DEVELOPMENT REVAMP
-------------------------

shouldn't have literally every aging player turn into a great shooter

old players are currently undervalued

player development revamp http://www.reddit.com/r/BasketballGM/comments/2cz7r6/player_development_code_has_kinda_ridiculous/
  too random, like players with pot=ovr are too likely to improve, makes low ovr high pot players less appealing http://www.reddit.com/r/BasketballGM/comments/36402p/how_does_potential_for_players_work_in_basketball/cravpqu?context=3
  something needs to be done. still too many 3 point shooting centers
  are ovr/pot combos reasonable, since ovr is weighted now?
  old stars should exist
  reports that there are too many PGs with high pot - probably because they can't improve hgt, and hgt is highly weighted in ovr
  too many rookies come in as instant stars. should be more gradual.
  career arcs for ratings - like low endurance/athleticism for old players, but skills remain
  smaller improvement per year, but more consistent
  if ovr==pot for young player, debug.averageCareerArc(50, 50) should be flat but it's a bit bumpy
options:
  compute "pot" for each rating, use that to generate displayed pot
  somehow do it organically, with different rates of growth in different categories
current beta issues:
  different types of players should develop differently
    maybe make it multiplicative? should be much more likely to go from 50-100 than 0-100
    or cutoff-based, like if you're below 20 you're never going to improve there?
    or position-based? height-based?
    ideal: skill-based, train them as a real coach would
  newly-generated players don't have right skill labels
  tune with debug.averageCareerArc(30, 80)

Too many good free agents available at the minimum: http://www.reddit.com/r/BasketballGM/comments/2sxs4l/love_the_game_suggestion_for_free_agency/

TEAM.VALUECHANGE REVAMP
-----------------------

https://www.reddit.com/r/BasketballGM/comments/585af3/the_trade_ai_is_too_easy_to_abuse/
loyalty: players should be reluctant to leave teams they've been on for a while.
http://www.reddit.com/r/BasketballGM/comments/2v26p1/how_are_you_exploiting_the_trade_ai/
http://www.reddit.com/r/BasketballGM/comments/255sta/i_think_we_need_longer_dynasty_achievements/che050a?context=3
IMPORTANT http://www.reddit.com/r/BasketballGM/comments/20i6v3/still_too_easy_to_trade_for_drafted_players/
  just drafted players are undervalued, possibly related to the following issue
PER scaling in player.value is wrong http://www.reddit.com/r/BasketballGM/comments/1y2lci/some_thoughts/cfgz8yk
  change scaling in ovr formula? too confusing?
  this impacts rookie values, leating to an EXPLOIT: http://www.reddit.com/r/BasketballGM/comments/1y2lci/some_thoughts/cfhkvnv
ovr changes should impact player.value, somehow
  probably by scaling PER from the previous season
    but what about old players? is this already factored in to the age decline in player.value?
    but are past years ratings always available from player.value? or is it sometimes done with fake player objects? need to check
  http://www.reddit.com/r/BasketballGM/comments/1ydtpd/seems_much_more_random_now/cfjxhj6
    teams do overvalue their own players in trades, generally
  http://www.reddit.com/r/BasketballGM/comments/2iuc4l/kind_of_a_glitch_that_i_noticed_during_my_last/
second round draft picks are undervalued. also, giving away a pick should never make a trade worse, but sometimes it does now. http://www.reddit.com/r/BasketballGM/comments/2bg3zx/simple_feature_mark_players_as_offlimits_when_we/cj5ap89
  similarly, trading block for nothing can net you second round picks
trade for tons of cheap second round picks, then use that to trade for good asset: www.reddit.com/r/BasketballGM/comments/27wjnp/33_pennies_for_a_dollar/
release and resign pick exploit http://www.reddit.com/r/BasketballGM/comments/1zn61h/finances/cfvzr35\
some limit on trades so people can't make 1000 slightly beneficial trades: http://www.reddit.com/r/BasketballGM/comments/1zzwbs/suggestions_on_trades/cg0e0dg
  probably make opposing owners less likely to trade as the number of proposed trades increases in a season
Eventually:
  "What would make this work?" functions should know about contending/rebuilding. Contending teams should be more eager to offer up young/cheap players, rebuilding teams should be more eager to offer up old/expensive players
    basically, they should view the trade from the other team's perspective, not just their own
  Can I provide better feedback about trade? Like if it's close or not? Or if it's rejected because of cap space issues?
  Set params with optimization algorithm
  Fix needToDrop stuff
    Problem now is, contract gets pushed into someone on the roster and it's lost. This is especially obvious if there is only one player in add and his contract is pushed to roster, then the trade is nothing.
    Probably not that important, since teams almost always have shitty players at the end of their rosters
  EXPLOIT that might be tricky to solve: in the "resigning players" phase, your free agents should still count towards your cap. Otherwise, you can trade to take on salary and then sign your players over the cap
  Should draft pick contract "worth" be determined better somehow, like it is for normal contracts? probably yes
    does this allow removal of fudge factor?
  population (i.e. richness) should influence opinion of contracts

PERFORMANCE CRAP
----------------

separate active and retired players into separate object stores

CURRENT
-------

standings view, if playoffsByConference === false, show whole league standings in right column, not conference standings
percentages for FG, FT, 3pt below box score like Yahoo
game log for individual player
  in each box score, include an array of players in the game. index on that.
great ideas: http://www.reddit.com/r/BasketballGM/comments/2q9yn8/ideas_questions_and_feedback_feel_free_to_add/
create a player during the playoffs and his stats row won't show up until the next season. basic problem seems to be that no playoff stats are returned if htere are no regular season stats
a 0 day injury doesn't show up in box score, so it looks like player was just benched http://www.reddit.com/message/messages/2pfuyr
career ending "injuries" http://www.reddit.com/r/BasketballGM/comments/2oo32x/are_there_career_ending_injuries/
if playoffSeries already exists, don't try to create again http://www.reddit.com/r/BasketballGM/comments/2on0ij/a_bug_will_not_advance_to_playoffs_errors_in_log/
  use put, not add
when uploading league file, no need to read whole thing in just to show teams menu. only need to read up to teams. but how?
simulate in multiple tabs -> NaN
should be impossible to have a player average 0 assists in big minutes
"My Career" page with GM stats across teams http://www.reddit.com/r/BasketballGM/comments/2gc4sf/gm_page/
+/- http://www.reddit.com/r/BasketballGM/comments/2cpdxg/both_individual_and_5man_units/
total control mode
  select draft pick for every team http://www.reddit.com/r/BasketballGM/comments/2b8g1d/new_multiplayer_league/cj31706
    localStorage.noAutoPick http://www.reddit.com/r/BasketballGM/comments/2dqt3v/i_want_to_start_an_online_league_with_a_faster/cjs51dj
  AI doesn't change roster http://www.reddit.com/message/messages/23pano
season preview
  overview of user's players ratings changes
  overview of notable ratings changes in other players
  MVP race preview
  power rankings
power rankings
  cache values for preseason and after season
    teamSeason.powerRankings = {overall, performance, talent, preseason}
  only show live during regular season
trade UI
  "Don't include in trade" checkbox column for asking AI to propose trade
  email
  http://datatables.net/extensions/fixedcolumns/
  http://www.reddit.com/r/BasketballGM/comments/28tzek/trade_ui_redesign_concept_what_do_you_all_think/
cordova
  in portrait, games in dashboard looks like shit
  hide export link
upcoming free agents
  off by one contract year?
  should be visible all the time, not blocked by FA limit page
account
  somehow periodically run util.account.check, which will check for login and for local achievements to send to cloud
    is this necessary?
  more pages
    account/edit
    account/:username (public profile showing achievements)
Achievements to add
  longeivity: play 10, 100, 1000 seasons in a singel league
  lucky/unlucky win/lose game 7 in OT
  underdog: things like winning title as 8 seed, etc
  win title without making a trade
  career stat milestone for players on your team from draft to the milestone
mobile UI
  slide in full height menu from right, like facebook or android's DrawerLayout
move manual to wordpress
  " < Basketball GM Manual" in title
  search for any manual links
"Watch list" of players the user is interested in, mainly for free agency
  add "actions" where appropriate, probably as output in player.filter so it can be used elsewhere
    negotiate
      factor out negotiateButton code from freeAgents and negotiationList and player page (if possible)
      some heuristic to see if player is a negotiable
      show mood too?
    draft, fantasy draft
      if prospect, add "draft" button?
      if so, factor out from draft page and add on player page
    ADD TO PLAYER PAGE, elsewhere?
show prospects before draft
  EVENTUALLY
    ratings should really update annually, just like in normal years
      fuzz changing for prospects should factor in changes in scouting budget
    movement between draft classes
      allow promising to draft a player at certain position to influence decision
career stats
  "All Seasons" option - add each unique player/season combo as a row, include column for year
  column/table widths?
  EWA in averages should be average
    if i change how it comes from player.filter, make sure it doesn't fuck up HoF
    same with per36
per36, totals, playoffs options elsewhere
  currently in playerStats and watchList, but too much copy/paste. refactor before expanding
  team history
  roster
per 36 stats in player pages http://www.reddit.com/r/BasketballGM/comments/1ofz6s/per36_stats/
  already implemented for stats page, but should it be a separate entry from player.filter like playoffs? totals isn't. maybe should just be a dropdown to change this all on the player page?
when left menu is shown (lg), don't show the same top menus (only tools and help). but adding hidden-lg to top menu items makes them persist when going from league to non-league dashboard
switch to bitbucket issues
  DON'T ADD ANYTHING NEW HERE!
  gradually move these issues over
  move over github issues
http://www.reddit.com/r/BasketballGM/comments/1sarll/open_source/cdxx3ql
free agents going unsigned?
  salary cap exception? too complicated?
    how much?
    who gets it? only if over cap when free agency starts?
    messages about it
      anywhere salary cap is displayed, including team finanaces
      contract negotiation - show warning if the exception will be used
      resigning players page
      update manual
    implementation
      flag in root of team object - exception available, exception used, exception not granted this season
  add some fucking market shit. calculate the salary demanded by free agents vs cap space available, then adjust free agent demands somehow
    this should be part of the daily updating. if everyone is capped out, drop all salaries to minimum.
notification system
  customize: http://www.reddit.com/r/BasketballGM/comments/1re3ea/new_feature_notification_bubbles/cdmjdyn
  "healed" should show after game, not before
  when fading out, hover should stop animation, remove notification-delete, reset timer to 1s (or something)
    hover on fading in should also stop animation so there is no stutter
  what about for small screens? maybe just show one at a time. is this actually a problem?
  also log these events:
    fired - log, but don't show
    new team
  notify
    when something happens to a player on the watch list
    big AI moves - trades, free agent signings
  merge "retired" and "HOF" notifications for a player on the user's team
  important notifications should be a different color, maybe require acknowledgement before closing
    errors
    refuse to sign
    retire
  colors/icons for good/bad things http://www.reddit.com/r/BasketballGM/comments/22bpwm/suggestion_notification_improvements/

BIG NEW FEATURES
----------------

historic power rankings http://www.reddit.com/r/BasketballGM/comments/2f0ip2/historic_power_rankings_best_teams_of_all_time/
player stat summaries http://www.reddit.com/r/BasketballGM/comments/2bf4z0/functionality_of_the_game_vs_2k/cj5ir16
unlimited draft class support
  http://www.reddit.com/r/BasketballGM/comments/2ajw7c/about_custom_draft/civz0n6
  take this opportunity to add some stuff to gameAttributes too
trading block should allow for multiple (different) offers from the same team
display of relative ratings like https://mail.google.com/mail/u/0/#inbox/144a4a04330edf3d
trade improvements
  refactor trade module with all the below in mind
    clean up even more?
      should create and updatePlayers be merged? updatePlayers already updates tids too
      either way, they should take partial objects and fill in the default/existing values
  trade suggestions (and trading block) should know salary rules
    HOW?
    team.valueChange could be made fast if I allow an extra argument to pass pre-fetched values from the database
    quick fix: check box to only look for teams under the cap http://www.reddit.com/r/BasketballGM/comments/1qh107/proposed_trades_question/
  trades between AI teams
    call team.checkRosterSizes after this if it's in between days
team switching after being fired
  keep track of what team the user controlled, so stats for the user (not the team) can be shown
random events
  like.. player gets suspended, out X games. or player gets into fight, fan support drops. etc.
  need a notification system first
more detailed draft - slower picks, trades, etc.
  slower picks http://www.reddit.com/r/BasketballGM/comments/1r70dv/trade_picks_during_draft
  sort by generic value (current) or team-specific value
  trade picks - note that the code in teamValue will need to be modified to account for the lottery and available players in the draft class
power rankings
  preseason too
  awards watch
popup next to player name with quick view of key stats/ratings
contests: post roster file and goal

BIG NEW GAMEPLAY CHANGES
------------------------

Extended free agency
  order of AI team signings shouldn't be linear
  0 year contracts http://www.reddit.com/r/BasketballGM/comments/1p0sa8/new_feature_extended_free_agency/ccy4gvp
  AI teams can release players to sign a better free agent?
fix contracts, signing
  goal: reasonable total payrolls, no good free agents left every season
  if WS distribution matches NBA, then look at $ vs WS. even better, build a multivariate model with age
  contracts should take ratings into more account, since stats on a good team are inflated and stats on a bad team are depressed
  player contract amounts http://www.reddit.com/r/BasketballGM/comments/1kj0p0/can_i_turn_off_firing/cbpxjyj?context=3
gameSim
  mediocre three point shooters should shoot it less http://www.reddit.com/r/BasketballGM/comments/2bwvpj/psa_players_who_shouldnt_shoot_3s_continue_to/
  smart substitutions http://www.reddit.com/r/BasketballGM/comments/2b9w78/went_7012_with_this_roster_is_this_really_that/cj3zgui
  big men should score more, shoot more FTs http://www.reddit.com/r/BasketballGM/comments/2amqpo/how_come_all_of_the_top_scorers_are_always_3_guys/
  pos/neg effects add on like civ4 defensive bonuses?
  balance http://www.reddit.com/r/BasketballGM/comments/1jfcjw/game_imbalance_fc_with_rdi/ http://www.reddit.com/message/messages/1097mj
  http://www.reddit.com/r/nba/comments/1j1e6q/i_made_a_singleplayer_basketball_management/cbfzr43?context=3 http://www.reddit.com/r/BasketballGM/comments/1k1881/pf_stands_for_powerful/
    too easy to get high percentage inside looks even with a team of all bigs?
    or should some of the "bigs" really be smalls, just mislabeled as PFs?
  make it less easy to get high percentage shots if there is no ball handling
    tweak perimFactor and synergyFactor.
  increase turnovers, particularly if perimFactor (or similar) is low
  increase fouls if perimFactor (or similar) is low
  assists should be function of speed, since those players have the ball more
  situational awareness http://www.reddit.com/r/BasketballGM/comments/1yg6wi/end_of_game_simulation/
  mediocre players on bad teams should be less efficient (shouldn't put up such a high PER, which falls if they join a good team)
add free agent to the end of roster
fuzz should affect potential more than other variables, when pot is different than ovr
mode with ratings hidden
  implement like fuzz?
  maybe use very rough letter grades like A/B/C/D/F to replace the ratings
"My Player" mode http://www.reddit.com/r/BasketballGM/comments/2swmwj/there_should_be_a_game_like_myplayer_in_2k/cntkvj4

MINOR FIXES
-----------

show team records in box score http://www.reddit.com/r/BasketballGM/comments/2dkpzw/request_team_record_in_box_scores/
retired players should be eligible for season awards
TS%
documentation
  http://www.reddit.com/r/BasketballGM/comments/2agxoe/questions_and_suggestions_from_a_new_player/
smoother multi-window updates
  instead of dbChange, cache previous updateEvents and pass them
    cache expiration?
assist leaders too low
Number of years in college should depend on talent level
Add MVP and Titles columns to HoF table
Make good young players much less likely to become FAs
Make rookie contracts 1 year longer
top menu tooltips for md
show team records in playoffs, conference standings
don't need to store abbrev with awards, just tids
  fix display in season summary (correct in historyAll)
show team records in playoffs page
on team history, show counts of conf/league championships, hall of fame players, etc
if a player refuses to resign, that decision should also be reflected in free agency (don't recalculate mood)
add "drb" to usage so that good ball handlers shoot more (favor guards over bigs more)
in player page, show red/green for ratings changes from the previous year, maybe as heatmap
in ratings tables, show dpot and dovr columns? maybe?
Add markers for clinching playoffs / 1st seed in league standings
trading block crashing bug
  happens in chrome in old leagues, apparently. running out of memory somehow?
first errorNotify in contractNegotiation.js really should be inline within that page
league leaders glitch http://www.reddit.com/r/BasketballGM/comments/1r20x5/league_leaders_bug/
merge game.play and freeAgents.play
replace random.gauss with random.realGauss
current season shouldn't show in league history page dropdown
make trade counter-offer faster by checking if no trade is possible first http://www.reddit.com/r/BasketballGM/comments/1jumc9/is_it_just_me_or_does_it_take_wayyyy_too_long_for/
document things that affect player mood
in playoffs, replace "play week" with "play until end of round"
don't need to check every team's roster limits every time games are played - could auto keep AI teams in line after any trade (with user or between AI teams), and then only the user's team needs to be checked
in playoffs, replace Week/Month in Play menu with Round http://www.reddit.com/r/BasketballGM/comments/1w55sb/suggestionplayoffs_simulate_by_round_instead_of/
gamesim shot distribution - less people shooting 3s really poorly, especially tall players
UI to easily switch between conference and division standings on small screens and dashboard http://www.reddit.com/r/BasketballGM/comments/2d4o9r/feature_requests_of_the_week_august_10_2014/cjqrwtf?context=3
schedule page (and dashboard and maybe gamelog) should show opponent records
add "play until end of quarter" in live gamesim

LOW PRIORITY
------------

awards races throughout the season
attendance should change faster http://www.reddit.com/r/BasketballGM/comments/30i8ts/should_attendance_be_more_responsive_to_extremely/
track longest W/L streaks
option to stop sim when player is injured http://www.reddit.com/r/BasketballGM/comments/2s265y/suggestion_option_to_automatically_stop/
tooling
  istanbul https://github.com/karma-runner/karma-coverage
simple advanced stats
  TS%, etc
  pace-weighted stats
team chemistry http://www.reddit.com/r/BasketballGM/comments/2oco2a/simple_suggestion_team_chemistry/cmrpap6?context=3
use compound index on season + team for games obectStore in helpers.gameLogList, views.leagueDashboard, maybe elsewhere
upcoming free agents page should show at least some information about signings (or non-signings) during re-sign phase
tanking is too easy http://www.reddit.com/r/BasketballGM/comments/20038f/too_easy_to_tank/
contractNegotiation
  young players should only want short deals if they have really high pot-ovr
box plots / distributions
  "it'd be great to overlay your roster to see where you stand. Maybe click on a name in a list to add or remove it from the display. Do I have a fast team? Do I have a three point shooting team? Are we big and bruising and slow?"
ratings change during the season, especially young playerUI to easily switch between conference and division standings on small screens and dashboard http://www.reddit.com/r/BasketballGM/comments/2d4o9r/feature_requests_of_the_week_august_10_2014/cjqrwtf?context=3
compare players http://www.reddit.com/r/BasketballGM/comments/1saclf/suggestion_compare_players/
awards
  show awards count in hall of fame
add numbers for players
  ability to retire numbers
some players should make bad plays - not everyone should have same basketball IQ in gameSim
  add a rating for basketball IQ?
fantasy draft
  when fantasy draft is over, go to summary of the draft
    do this in core.draft.untilUserOrEnd
  make tables sortable
  add entry for fantasy draft summary to draft history dropdown?
league settings
  enable buy out button or not
  set salary cap, luxury tax, exceptions, etc
  enable/disable trading rules
cross-league play
mobile UI, bootstrap 3
  do something about hover tooltips
    injury
    skills
      for injury and skills, maybe make the whole block a hyperlink that opens a popover
        make sure to use on player page too.. can i use helpers.playerName.. there too?
    table headers
    others?
  any columns: *em css - can't i make columns use bootstrap?
some kind of playoff series overview page, including box scores for easy access
luxury tax money should be redistributed to non-taxpaying teams (or teams under the cap?)
A year-to-date comparison of team finances with the previous year.
better core.player.ovr formula
  regression: player = require('core/player'); player.regressRatingsPer();
    weight by minutes played
  THIS NEEDS TO BE UPDATED WHEN PLAYER GENERATION/DEVELOPMENT OR GAMESIM CHANGES!
different owner personalities, with different priorities
trades
  "undo" button for accidental trades
    transaction log first. put "Undo" button after message from other GM only right after a trade finishes. make sure it doesn't show up at other time
      only allow undo if dbChange hasn't changed since the transaction was logged
  "When signing free agents, if you offer then a contract 2 years longer/shorter than the one they want, they'll counter offer one with 1 more/less year. If you offer the same amount of money you previously offered, and change the year to what they want, they'll automatically offer the lowest $ for that amount of years."
more detailed player moods - http://www.reddit.com/r/BasketballGM/comments/1k4val/players_refusing_to_sign_bug/cbln1oo?context=3
  player personality, team chemistry
  http://www.reddit.com/r/BasketballGM/comments/1tkw3e/idea_player_traits/
dashboard info should be on a widget accessible from any screen
some UI indicating how players developed over the offseason
  integrated into roster, or separate page?
player search page
  show stats, ratings, contract, etc. (customizable); allow filters to be applied. also filter by skill icon
  search by stats, ratings, or attributes
  trade for button, or sign button if free agent, or draft button if draft prospect
    same contextual buttons for watch list
    can this become main UI for drafting (at least fantasy draft)
finances
  too easy to make big $$$
    owner should take profits each year
  AI teams should adjust spending
player morale - punishment for tanking
team colors, and uniforms in player icons
harsher, more realistic luxury tax
midlevel exception
playerNameLabels should also put a little hover box over the player link with key stats/ratings
more refined control of playing time
  http://www.reddit.com/r/nba/comments/1j1e6q/i_made_a_singleplayer_basketball_management/cbaegpq
  http://www.reddit.com/r/BasketballGM/comments/1qaml8/playing_time_explain_to_me_like_im_8/
  just set minutes directly? any minutes not included, leave up to coach's discretion
draft
  randomness in picks should factor in relative ratings http://www.reddit.com/r/BasketballGM/comments/1l1713/the_draft_still_needs_some_work_it_seems_my/cbutw7v?context=1
  somehow allow uploading of custom draft classes
trades between AI teams
  each day, pick two random teams. if a trade can be found that both teams like, do it
    generalize core.trade.makeItWork and other parts of core.trade
  transaction log is necessary to keep tabs on this stuff
  also propose trades to the user, somehow
core.team.valueChange should be used to pick which free agents to sign in core.freeAgents.autoSign, but that would be a bitch beacuse of how transactions are set up
  also for resigning players in core.season
trades
  cash
    estimate value of cash - different for different teams? depending on cash, net profit recently, and market size
    upper limit? what is NBA rule?
  more feedback from AI
    if trade is close/far from working, return different messages
    display some indication of what a team wants to do on the trade view, e.g.
      "I need to cut my payroll and start making more money."
      "I could really use a good rebounder."
  sign and trade (only during resigning phase)
god mode
  options
    disable ratings display
    playoff round length
profits too large, too easy
  add corporate tax?
  luxury tax increases for repeat offenders?
export/import roster
  some way to specify startingSeason
  easily edit in excel?
core.freeAgents should be core.freeAgent or core.freeAgency?
after last resigning negotiation, switch to next phase?
draft lottery
  do a dramatic presentation?
  increase hype for teams that exceed expectations
  tied records?
  should happen in "before draft" phase to allow trading early
increase hype for big free agent signings
how to handle aggregating stats for players who played for more than one team in a season? add them all up in ps in db.getPlayers
  for roster, want just a player's stats with this team this season
    this currently works, just pass a tid
  for player stats view, want total among all teams for one season
    no pass tid and you only get the latest row. need added logic to do sum
  for player view, want separate and combined rows in careerStats without fucking up totals (including PER)
    no pass tid and you get each team separately, but no merged stats as above
contracts
  maybe make them nonlinear.. role players lower, stars higher
    compare to NBA contract distribution
luxury tax should be disbursed amongst non-taxpaying teams
team.rosterAutoSort should automatically set dbChanged, and have an option to not if that's important
test trades more
  multi-player valuation
    rank players by value. each additional value gets some multiplier to diminish its influence. this prevents adding a player to a trade from decreasing its value
    but this should have something to do with the difference between numbers of players on each side?
if fouling out drops team below 5 active players, play fouled out players but add a FT each foul (technical)
show old contracts on old roster view
core.trade refactoring
  validateSavedTids crap should be in trade.js.
  trade.summary stuff should be automatic and stored in tradeStore
  trade and clear buttons should be disabled during gameSim, with message like in team finances
too easy to do the "be bad, get draft picks, keep payroll low, sign free agents, be good" pattern
  free agents are even less willing to sign with the user, even if it's a good team
final score, hall of fame
  influenced by size of city (see: difficulty in views.newLeague)
database changes
  add activeYears multientry like statsTids use for:
    league leaders
    stats
    ratings
gameSim
  use real clock (this.t) rather than number of possessions
  teams should play quicker as the clock runs out
    more generally, teams should have situational awareness
  more penalty for really unbalanced rosters: http://www.reddit.com/r/nba/comments/1j1e6q/i_made_a_singleplayer_basketball_management/cba743c?context=3
  rename compositeRating to compositeRatings (or something better)
    other plural issues in gameSim
  playing time not adding up to 240?
  do some kind of profiling, see if i can speed it up
    any way to speed up PER? maybe break it up into smaller functions so they can be profiled
    do i need all the player composite ratings?
    do i need all the team composite ratings?
    how does performance change/degrade as the years go on?
  bench players should get minutes in blowouts
in lock functions, update g from database before using any potentially sensitive values
  or should these g.whatever variables be set at all if they're sensitive? lid doesn't change obviously, but the others?
AI modules that contain functions which are called to determine actions
  things to regulate...
    draft picks
    signing free agents
    resigning players
    trades
    budget items (like from team finances view)
    releasing/buying out players when over limit
AI teams should periodically reorder rosters throughout the season
PER
  slow, particularly after multiple seasons?
    can i have it share a transaction with writing stats in core.game?
some UI showing the state of the team's synergy. maybe like an advisors screen that suggests what kind of player is needed to improve synergy
  also can respond to budget changes
  more general: have "media" reporting things like 10 worst contracts, etc
like on team finances page, anywhere else to add help popups?
  should this be abstracted rather than just inline in views?
  inline anything from the manual?
freeAgentMoods should affect AI team signings - or should it?
  for resigning players
  for signing free agents
AI updating of *Budgets and ticket prices
  maybe not necessary at this stage?
  call core.finances.updateBudgetRanks() after
update formulas
  nationalTvRevenue
    same for each team, change contract year by year and display in team finances
  localTvRevenue
    eventually, t.seasons[0].tvContract

FUTURE
------

event log UI
  allow filtering type with checkboxes
  what about events with no tid? they are currently not viewable
draftOrder should just be in globals, not a real table
shot charts showing hot spots (red/yellow/green) based on shot location data
If you are simulating through the whole season and execute a trade while simulating, it will continue simulating even if you are over the roster limit. http://www.reddit.com/r/BasketballGM/comments/1xch01/trades_after_season/cfamo73
IE/Edge support
  compound indexes
hire/fire different coaches with different strategies
Web workers
  don't seem to actually help performance. maybe help responsiveness
  benchmark?
  would it be worth it to parallelize advstats?
  would it be worth it if the worker was reading and writing to the database, instead of sending information back and forth?
boxplots for shot location stats, plus comparison to NBA data
import/export stuff
  online "locker" that you can sync saved games to
  https://unhosted.org/adventures/7/Adding-remote-storage-to-unhosted-web-apps.html
  league names
    "Edit" button between "Export" and "Delete" - set in leaguesStore and gameAttributes
      move delete/edit/export under one button, "manage". have the 3 buttons pop out in place when you hit manage, then it functions as it does now. popped buttons can be colored too, then
other advanced stats
  WS - http://www.basketball-reference.com/about/ws.html requires Basketball on Paper - http://www.sports-reference.com/cbb/about/ws.html is simpler
  things derived from +/-, maybe on demand
moving to other cities
expansion teams (add population growth, expand when certain conditions are met)
team finances view
  compare bar graphs against league averages?
different size stadiums, building new stadiums
tv revenue as a variable
  local tv contract - $10 million
    base on tvContractAmount, tvContractExp
    will be a deal from 3 to 5 years in length
    based on...
      region population
      "hype"
      random noise
      "random event" - competition between two networks, Sports TV and The Basketball Channel
    when renegotiating and really bad, the guy pretends not to know you - "Atlanta Herons? Is that the team from the Mexican/Canadian/Arena/Indoor/Xtreme Volleyball/Soccer/Tennis/Racing/Curling/MudWrestling League?"
stat views
  playoff/regular season toggle in team/player stats, league leaders
input to helpers.formatCurrency (and all currency in variables everywhere) should be in 1000s of dollars and then only converted to millions when displayed
AI teams should have to deal with fuzz too
"dbChanged" updateEvent - more correct way
  store a list of times and "update events". compare last updated time against that list, and then see the update events. pass as list in "update event" to realtime update
  check everywhere dbChange or lastDbChange is set and see if it should be more refined
    add playerMovement updateEvent, for when a player signs a contract, becomes a free agent, or is traded
  or use something like broadcastchannel https://hacks.mozilla.org/2015/05/trainspotting-firefox-38/
bbgmView
  can i do some check to abandon display if idLoading is mismatched with reality? like for clicking a slow link followed by a fast link, in rapid succession, the fast output should show and the slow should be short circuited.
    in practice, this doesn't seem to matter much
  shouldn't have newPhase updateEvent doing much. instead, have an array of what changed in that phase
    (updateEvents.indexOf("newPhase") >= 0 && g.phase === g.PHASE.PRESEASON) should be newSeason
views.teamFinances should merge db call with team.filter to get seasonAttrs, but that will require rewriting seasonAttrs handling in team.filter to handle multiple seasons.
git log -- js/core/gameSimNew.js
live play-by-play simulation
  slow it down http://www.reddit.com/r/BasketballGM/comments/1pu92x/new_feature_live_playbyplay_simulation/cd6xq54?context=3
  change of possession with no rebound/turnover?
  live box score
    update injury icon when player is hurt - would be easy if injury.type was observable, but it's not and I have no idea why. force update with fake name update?
    game clock using min - more accurate, but more complicated - does this even work?
  could fake where the shots are to display graphically
  when someone wins the title, you can see the phase change at the top even while watching the live play-by-play of the last game. this leaks info about who won
  allow the user to make substitutions in realtime
multi team trades

# Pre-JavaScript TODO

csrf protection
  even for ajax https://docs.djangoproject.com/en/1.2/releases/1.2.5/#csrf-exception-for-ajax-requests

# BELOW IS OLD STUFF

UI
--
in team stats tab, allow toggle to show opponent stats

AI (NON-GAMESIM)
----------------
trade
  AI teams trade with each other
  Feedback from trades (way off, that's close, etc)
  "Oh, you again?" after failed trade attempts
  AI teams should be aware of contract lengths and the implications thereof
AI teams release/buy out players to sign a better free agent

---

i18n
- http://i18next.com/docs/