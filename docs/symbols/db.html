<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
	<head>
		<meta http-equiv="content-type" content="text/html; charset=utf-8" />
		<meta name="generator" content="JsDoc Toolkit" />
		
		<title>JsDoc Reference - db</title>

		<style type="text/css">
			/* default.css */
body
{
	font: 12px "Lucida Grande", Tahoma, Arial, Helvetica, sans-serif;
	width: 800px;
}

.header
{
	clear: both;
	background-color: #ccc;
	padding: 8px;
}

h1
{
	font-size: 150%;
	font-weight: bold;
	padding: 0;
	margin: 1em 0 0 .3em;
}

hr
{
	border: none 0;
	border-top: 1px solid #7F8FB1;
	height: 1px;
}

pre.code
{
	display: block;
	padding: 8px;
	border: 1px dashed #ccc;
}

#index
{
	margin-top: 24px;
	float: left;
	width: 160px;
	position: absolute;
	left: 8px;
	background-color: #F3F3F3;
	padding: 8px;
}

#content
{
	margin-left: 190px;
	width: 600px;
}

.classList
{
	list-style-type: none;
	padding: 0;
	margin: 0 0 0 8px;
	font-family: arial, sans-serif;
	font-size: 1em;
	overflow: auto;
}

.classList li
{
	padding: 0;
	margin: 0 0 8px 0;
}

.summaryTable { width: 100%; }

h1.classTitle
{
	font-size:170%;
	line-height:130%;
}

h2 { font-size: 110%; }
caption, div.sectionTitle
{
	background-color: #7F8FB1;
	color: #fff;
	font-size:130%;
	text-align: left;
	padding: 2px 6px 2px 6px;
	border: 1px #7F8FB1 solid;
}

div.sectionTitle { margin-bottom: 8px; }
.summaryTable thead { display: none; }

.summaryTable td
{
	vertical-align: top;
	padding: 4px;
	border-bottom: 1px #7F8FB1 solid;
	border-right: 1px #7F8FB1 solid;
}

/*col#summaryAttributes {}*/
.summaryTable td.attributes
{
	border-left: 1px #7F8FB1 solid;
	width: 140px;
	text-align: right;
}

td.attributes, .fixedFont
{
	line-height: 15px;
	color: #002EBE;
	font-family: "Courier New",Courier,monospace;
	font-size: 13px;
}

.summaryTable td.nameDescription
{
	text-align: left;
	font-size: 13px;
	line-height: 15px;
}

.summaryTable td.nameDescription, .description
{
	line-height: 15px;
	padding: 4px;
	padding-left: 4px;
}

.summaryTable { margin-bottom: 8px; }

ul.inheritsList
{
	list-style: square;
	margin-left: 20px;
	padding-left: 0;
}

.detailList {
	margin-left: 20px; 
	line-height: 15px;
}
.detailList dt { margin-left: 20px; }

.detailList .heading
{
	font-weight: bold;
	padding-bottom: 6px;
	margin-left: 0;
}

.light, td.attributes, .light a:link, .light a:visited
{
	color: #777;
	font-style: italic;
}

.fineprint
{
	text-align: right;
	font-size: 10px;
}
		</style>
	</head>

	<body>
<!-- ============================== header ================================= -->	
		<!-- begin static/header.html -->
		<div id="header">
</div>
		<!-- end static/header.html -->

<!-- ============================== classes index ============================ -->
		<div id="index">
			<!-- begin publish.classesIndex -->
			<div align="center"><a href="../index.html">Class Index</a>
| <a href="../files.html">File Index</a></div>
<hr />
<h2>Classes</h2>
<ul class="classList">
	
	<li><i><a href="../symbols/_global_.html">_global_</a></i></li>
	
	<li><a href="../symbols/api.html">api</a></li>
	
	<li><a href="../symbols/core.contractNegotiation.html">core.contractNegotiation</a></li>
	
	<li><a href="../symbols/core.freeAgents.html">core.freeAgents</a></li>
	
	<li><a href="../symbols/core.game.html">core.game</a></li>
	
	<li><a href="../symbols/core.gameSim.html">core.gameSim</a></li>
	
	<li><a href="../symbols/core.league.html">core.league</a></li>
	
	<li><a href="../symbols/core.player.html">core.player</a></li>
	
	<li><a href="../symbols/core.season.html">core.season</a></li>
	
	<li><a href="../symbols/core.trade.html">core.trade</a></li>
	
	<li><a href="../symbols/db.html">db</a></li>
	
	<li><a href="../symbols/ui.html">ui</a></li>
	
	<li><a href="../symbols/util.advStats.html">util.advStats</a></li>
	
	<li><a href="../symbols/util.helpers.html">util.helpers</a></li>
	
	<li><a href="../symbols/util.lock.html">util.lock</a></li>
	
	<li><a href="../symbols/util.random.html">util.random</a></li>
	
</ul>
<hr />
			<!-- end publish.classesIndex -->
		</div>
		
		<div id="content">
<!-- ============================== class title ============================ -->
			<h1 class="classTitle">
				
				Namespace db
			</h1>

<!-- ============================== class summary ========================== -->			
			<p class="description">
				
				
			
				Functions that directly access an IndexedDB database.
				
				
					<br /><i>Defined in: </i> &lt;js/db.js&gt;.
				
			</p>

<!-- ============================== constructor summary ==================== -->			
			
			<table class="summaryTable" cellspacing="0" summary="A summary of the constructor documented in the class db.">
				<caption>Namespace Summary</caption>
				<thead>
					<tr>
						<th scope="col">Constructor Attributes</th>
						<th scope="col">Constructor Name and Description</th>
					</tr>
				</thead>
				<tbody>
					<tr>
						<td class="attributes">&nbsp;</td>
						<td class="nameDescription" >
							<div class="fixedFont">
								<b><a href="../symbols/db.html#constructor">db</a></b>
							</div>
							<div class="description"></div>
						</td>
					</tr>
				</tbody>
			</table>
			

<!-- ============================== properties summary ===================== -->
			

<!-- ============================== methods summary ======================== -->
			
				
				
				<table class="summaryTable" cellspacing="0" summary="A summary of the methods documented in the class db.">
					<caption>Method Summary</caption>
					<thead>
						<tr>
							<th scope="col">Method Attributes</th>
							<th scope="col">Method Name and Description</th>
						</tr>
					</thead>
					<tbody>
					
						<tr>
							<td class="attributes">&lt;static&gt; &nbsp;</td>
							<td class="nameDescription">
								<div class="fixedFont">db.<b><a href="../symbols/db.html#.getObjectStore">getObjectStore</a></b>(ot, transactionObjectStores, objectStore, readwrite)
								</div>
								<div class="description">Get an object store based on input which may be the desired object store, a transaction to be used, or null.</div>
							</td>
						</tr>
					
						<tr>
							<td class="attributes">&lt;static&gt; &nbsp;</td>
							<td class="nameDescription">
								<div class="fixedFont">db.<b><a href="../symbols/db.html#.getPayroll">getPayroll</a></b>(ot, tid, cb)
								</div>
								<div class="description">Get the total payroll for a team.</div>
							</td>
						</tr>
					
						<tr>
							<td class="attributes">&lt;static&gt; &nbsp;</td>
							<td class="nameDescription">
								<div class="fixedFont">db.<b><a href="../symbols/db.html#.getPlayer">getPlayer</a></b>(pa, season, tid, attributes, stats, ratings, options)
								</div>
								<div class="description">Get a filtered player object.</div>
							</td>
						</tr>
					
						<tr>
							<td class="attributes">&lt;static&gt; &nbsp;</td>
							<td class="nameDescription">
								<div class="fixedFont">db.<b><a href="../symbols/db.html#.getPlayers">getPlayers</a></b>(playersAll, season, tid, attributes, stats, ratings, options)
								</div>
								<div class="description">Get an array of filtered player objects.</div>
							</td>
						</tr>
					
						<tr>
							<td class="attributes">&lt;static&gt; &nbsp;</td>
							<td class="nameDescription">
								<div class="fixedFont">db.<b><a href="../symbols/db.html#.getTeam">getTeam</a></b>(ta, season, attributes, stats, seasonAttributes, options)
								</div>
								<div class="description">Get a filtered team object.</div>
							</td>
						</tr>
					
						<tr>
							<td class="attributes">&lt;static&gt; &nbsp;</td>
							<td class="nameDescription">
								<div class="fixedFont">db.<b><a href="../symbols/db.html#.getTeams">getTeams</a></b>(ot, season, attributes, stats, seasonAttributes, options, sortBy, cb)
								</div>
								<div class="description">Get an array of filtered team objects.</div>
							</td>
						</tr>
					
						<tr>
							<td class="attributes">&lt;static&gt; &nbsp;</td>
							<td class="nameDescription">
								<div class="fixedFont">db.<b><a href="../symbols/db.html#.putPlayer">putPlayer</a></b>(ot, p, cb)
								</div>
								<div class="description">Add a new player to the database or update an existing player.</div>
							</td>
						</tr>
					
						<tr>
							<td class="attributes">&lt;static&gt; &nbsp;</td>
							<td class="nameDescription">
								<div class="fixedFont">db.<b><a href="../symbols/db.html#.rosterAutoSort">rosterAutoSort</a></b>(ot, tid, cb)
								</div>
								<div class="description">Sort a team's roster based on player ratings.</div>
							</td>
						</tr>
					
					</tbody>
				</table>
				
				
				
			
<!-- ============================== events summary ======================== -->
			

<!-- ============================== constructor details ==================== -->		
			
			<div class="details"><a name="constructor"> </a>
				<div class="sectionTitle">
					Namespace Detail
				</div>
				
				<div class="fixedFont">
						<b>db</b>
				</div>
				
				<div class="description">
					
					
				</div>
				
				
				
				
					
					
					
					
					
					
					

			</div>
			

<!-- ============================== field details ========================== -->		
			

<!-- ============================== method details ========================= -->		
			
				<div class="sectionTitle">
					Method Detail
				</div>
				
					<a name=".getObjectStore"> </a>
					<div class="fixedFont">&lt;static&gt; 
					
					<span class="light">{(IDBObjectStore|IDBTransaction)}</span>
					<span class="light">db.</span><b>getObjectStore</b>(ot, transactionObjectStores, objectStore, readwrite)
					
					</div>
					<div class="description">
						Get an object store based on input which may be the desired object store, a transaction to be used, or null.

This allows the other db.* functions to use transactions or object stores that have already been defined, which often makes things a lot faster.
						
						
					</div>
					
					
					
						
							<dl class="detailList">
							<dt class="heading">Parameters:</dt>
							
								<dt>
									<span class="light fixedFont">{(IDBObjectStore|IDBTransaction|null)}</span> <b>ot</b>
									
								</dt>
								<dd>An IndexedDB object store or transaction to be used; if null is passed, then a new transaction will be used.</dd>
							
								<dt>
									<span class="light fixedFont">{(string|Array.<string>)}</span> <b>transactionObjectStores</b>
									
								</dt>
								<dd>The object stores to open a transaction with, if necessary.</dd>
							
								<dt>
									<span class="light fixedFont">{?string}</span> <b>objectStore</b>
									
								</dt>
								<dd>The object store to return. If null, return a transaction.</dd>
							
								<dt>
									<span class="light fixedFont">{boolean=}</span> <b>readwrite</b>
									
								</dt>
								<dd>Should the transaction be readwrite or not? This only applies when a new transaction is created here (i.e. no transaction or objectStore is passed). Default false.</dd>
							
							</dl>
						
						
						
						
						
							<dl class="detailList">
							<dt class="heading">Returns:</dt>
							
								<dd><span class="light fixedFont">{(IDBObjectStore|IDBTransaction)}</span> The requested object store or transaction.</dd>
							
							</dl>
						
						
						

					<hr />
				
					<a name=".getPayroll"> </a>
					<div class="fixedFont">&lt;static&gt; 
					
					
					<span class="light">db.</span><b>getPayroll</b>(ot, tid, cb)
					
					</div>
					<div class="description">
						Get the total payroll for a team.

This includes players who have been released but are still owed money from their old contracts.
						
						
					</div>
					
					
					
						
							<dl class="detailList">
							<dt class="heading">Parameters:</dt>
							
								<dt>
									<span class="light fixedFont">{IDBTransaction|null}</span> <b>ot</b>
									
								</dt>
								<dd>An IndexedDB transaction on players and releasedPlayers; if null is passed, then a new transaction will be used.</dd>
							
								<dt>
									<span class="light fixedFont">{number}</span> <b>tid</b>
									
								</dt>
								<dd>Team ID.</dd>
							
								<dt>
									<span class="light fixedFont">{function(Array)}</span> <b>cb</b>
									
								</dt>
								<dd>Callback whose first argument is the payroll in thousands of dollars.</dd>
							
							</dl>
						
						
						
						
						
						
						

					<hr />
				
					<a name=".getPlayer"> </a>
					<div class="fixedFont">&lt;static&gt; 
					
					<span class="light">{Object}</span>
					<span class="light">db.</span><b>getPlayer</b>(pa, season, tid, attributes, stats, ratings, options)
					
					</div>
					<div class="description">
						Get a filtered player object.

For a player object (pa), create an object suitible for output based on the appropriate season and tid. attributes, stats, and ratings are lists of keys. In the output, the attributes keys will be in the root of the object. There will also be stats and ratings properties containing the filtered stats and ratings objects, if appropriate. If season is null, then the stats and ratings objects will contain lists of objects for each season and tid is ignored. Then, there will also be a careerStats property in the output object containing an object with career averages.

This function is overcomplicated and convoluted.
						
						
					</div>
					
					
					
						
							<dl class="detailList">
							<dt class="heading">Parameters:</dt>
							
								<dt>
									<span class="light fixedFont">{Object}</span> <b>pa</b>
									
								</dt>
								<dd>Player object.</dd>
							
								<dt>
									<span class="light fixedFont">{?number}</span> <b>season</b>
									
								</dt>
								<dd>Season to retrieve stats/ratings for. If null, return stats/ratings for all seasons in a list as well as career totals in player.careerStats.</dd>
							
								<dt>
									<span class="light fixedFont">{?number}</span> <b>tid</b>
									
								</dt>
								<dd>Team ID to retrieve stats for. This is useful in the case where a player played for multiple teams in a season. Eventually, there should be some way to specify whether the stats for multiple teams in a single season should be merged together or not. For now, passing null just picks the first entry, which is clearly wrong.</dd>
							
								<dt>
									<span class="light fixedFont">{Array.<string>}</span> <b>attributes</b>
									
								</dt>
								<dd>List of player attributes to include in output.</dd>
							
								<dt>
									<span class="light fixedFont">{Array.<string>}</span> <b>stats</b>
									
								</dt>
								<dd>List of player stats to include in output.</dd>
							
								<dt>
									<span class="light fixedFont">{Array.<string>}</span> <b>ratings</b>
									
								</dt>
								<dd>List of player ratings to include in output.</dd>
							
								<dt>
									<span class="light fixedFont">{Object}</span> <b>options</b>
									
								</dt>
								<dd>Object containing various options. Possible keys include...  "totals": Boolean representing whether to return total stats (true) or per-game averages (false); default is false. Other keys should eventually be documented.</dd>
							
							</dl>
						
						
						
						
						
							<dl class="detailList">
							<dt class="heading">Returns:</dt>
							
								<dd><span class="light fixedFont">{Object}</span> Filtered object containing the requested information for the player.</dd>
							
							</dl>
						
						
						

					<hr />
				
					<a name=".getPlayers"> </a>
					<div class="fixedFont">&lt;static&gt; 
					
					
					<span class="light">db.</span><b>getPlayers</b>(playersAll, season, tid, attributes, stats, ratings, options)
					
					</div>
					<div class="description">
						Get an array of filtered player objects.

After the first argument, all subsequent arguments are passed on to db.getPlayer, where further documentation can also be found.
						
						
					</div>
					
					
					
						
							<dl class="detailList">
							<dt class="heading">Parameters:</dt>
							
								<dt>
									<span class="light fixedFont">{Array}</span> <b>playersAll</b>
									
								</dt>
								<dd>Array of player objects.</dd>
							
								<dt>
									<b>season</b>
									
								</dt>
								<dd></dd>
							
								<dt>
									<b>tid</b>
									
								</dt>
								<dd></dd>
							
								<dt>
									<b>attributes</b>
									
								</dt>
								<dd></dd>
							
								<dt>
									<b>stats</b>
									
								</dt>
								<dd></dd>
							
								<dt>
									<b>ratings</b>
									
								</dt>
								<dd></dd>
							
								<dt>
									<b>options</b>
									
								</dt>
								<dd></dd>
							
							</dl>
						
						
						
						
						
						
						

					<hr />
				
					<a name=".getTeam"> </a>
					<div class="fixedFont">&lt;static&gt; 
					
					
					<span class="light">db.</span><b>getTeam</b>(ta, season, attributes, stats, seasonAttributes, options)
					
					</div>
					<div class="description">
						Get a filtered team object.

See db.getTeams for documentation.
						
						
					</div>
					
					
					
						
							<dl class="detailList">
							<dt class="heading">Parameters:</dt>
							
								<dt>
									<b>ta</b>
									
								</dt>
								<dd></dd>
							
								<dt>
									<b>season</b>
									
								</dt>
								<dd></dd>
							
								<dt>
									<b>attributes</b>
									
								</dt>
								<dd></dd>
							
								<dt>
									<b>stats</b>
									
								</dt>
								<dd></dd>
							
								<dt>
									<b>seasonAttributes</b>
									
								</dt>
								<dd></dd>
							
								<dt>
									<b>options</b>
									
								</dt>
								<dd></dd>
							
							</dl>
						
						
						
						
						
						
						

					<hr />
				
					<a name=".getTeams"> </a>
					<div class="fixedFont">&lt;static&gt; 
					
					
					<span class="light">db.</span><b>getTeams</b>(ot, season, attributes, stats, seasonAttributes, options, sortBy, cb)
					
					</div>
					<div class="description">
						Get an array of filtered team objects.
						
						
					</div>
					
					
					
						
							<dl class="detailList">
							<dt class="heading">Parameters:</dt>
							
								<dt>
									<span class="light fixedFont">{(IDBTransaction|null)}</span> <b>ot</b>
									
								</dt>
								<dd>An IndexedDB transaction on players, releasedPlayers, and teams; if null is passed, then a new transaction will be used.</dd>
							
								<dt>
									<span class="light fixedFont">{number}</span> <b>season</b>
									
								</dt>
								<dd>Season to retrieve data for.</dd>
							
								<dt>
									<span class="light fixedFont">{Array.<string>}</span> <b>attributes</b>
									
								</dt>
								<dd>List of non-seasonal attributes (such as team name) to include in output.</dd>
							
								<dt>
									<span class="light fixedFont">{Array.<string>}</span> <b>stats</b>
									
								</dt>
								<dd>List of team stats to include in output.</dd>
							
								<dt>
									<span class="light fixedFont">{Array.<string>}</span> <b>seasonAttributes</b>
									
								</dt>
								<dd>List of seasonal attributes (such as won or lost) to include in output.</dd>
							
								<dt>
									<span class="light fixedFont">{Object}</span> <b>options</b>
									
								</dt>
								<dd>Object containing various options. Possible keys include... "sortBy": String represeting the sorting method; "winp" sorts by descending winning percentage, "winpAsc" does the opposite, default is sort by team ID. "totals": Boolean representing whether to return total stats (true) or per-game averages (false); default is false.</dd>
							
								<dt>
									<span class="light fixedFont">{string|null}</span> <b>sortBy</b>
									
								</dt>
								<dd>String represeting the sorting method. "winp" sorts by descending winning percentage, "winpAsc" does the opposite.</dd>
							
								<dt>
									<span class="light fixedFont">{function(Array)}</span> <b>cb</b>
									
								</dt>
								<dd>Callback whose first argument is an array of all the team objects.</dd>
							
							</dl>
						
						
						
						
						
						
						

					<hr />
				
					<a name=".putPlayer"> </a>
					<div class="fixedFont">&lt;static&gt; 
					
					
					<span class="light">db.</span><b>putPlayer</b>(ot, p, cb)
					
					</div>
					<div class="description">
						Add a new player to the database or update an existing player.
						
						
					</div>
					
					
					
						
							<dl class="detailList">
							<dt class="heading">Parameters:</dt>
							
								<dt>
									<span class="light fixedFont">{IDBObjectStore|IDBTransaction|null}</span> <b>ot</b>
									
								</dt>
								<dd>An IndexedDB object store or transaction on players, readwrite; if null is passed, then a new transaction will be used.</dd>
							
								<dt>
									<span class="light fixedFont">{Object}</span> <b>p</b>
									
								</dt>
								<dd>Player object.</dd>
							
								<dt>
									<span class="light fixedFont">{function()=}</span> <b>cb</b>
									
								</dt>
								<dd>Optional callback.</dd>
							
							</dl>
						
						
						
						
						
						
						

					<hr />
				
					<a name=".rosterAutoSort"> </a>
					<div class="fixedFont">&lt;static&gt; 
					
					
					<span class="light">db.</span><b>rosterAutoSort</b>(ot, tid, cb)
					
					</div>
					<div class="description">
						Sort a team's roster based on player ratings.
						
						
					</div>
					
					
					
						
							<dl class="detailList">
							<dt class="heading">Parameters:</dt>
							
								<dt>
									<span class="light fixedFont">{(IDBObjectStore|IDBTransaction|null)}</span> <b>ot</b>
									
								</dt>
								<dd>An IndexedDB object store or transaction on players readwrite; if null is passed, then a new transaction will be used.</dd>
							
								<dt>
									<span class="light fixedFont">{number}</span> <b>tid</b>
									
								</dt>
								<dd>Team ID.</dd>
							
								<dt>
									<span class="light fixedFont">{function()=}</span> <b>cb</b>
									
								</dt>
								<dd>Optional callback.</dd>
							
							</dl>
						
						
						
						
						
						
						

					
				
			
			
<!-- ============================== event details ========================= -->		
			
			
			<hr />
		</div>

		
<!-- ============================== footer ================================= -->
		<div class="fineprint" style="clear:both">
			
			Documentation generated by <a href="http://code.google.com/p/jsdoc-toolkit/" target="_blank">JsDoc Toolkit</a> 2.4.0 on Sat Feb 23 2013 21:34:57 GMT-0500 (EST)
		</div>
	</body>
</html>
