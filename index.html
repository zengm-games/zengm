<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Basketball GM</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="shortcut icon" href="/ico/favicon.ico">
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="/ico/apple-touch-icon-114-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="/ico/apple-touch-icon-72-precomposed.png">
    <link rel="apple-touch-icon-precomposed" href="/ico/apple-touch-icon-57-precomposed.png">

    <script src="//d2wy8f7a9ursnm.cloudfront.net/bugsnag-2.min.js"
      data-apikey="c10b95290070cb8888a7a79cc5408555"></script>

    <script type="text/javascript">
      function loadCSS(filename){
        var el = document.createElement("link");
        el.setAttribute("rel", "stylesheet");
        el.setAttribute("href", filename);
        document.getElementsByTagName("head")[0].appendChild(el);
      }

      if (localStorage.debug === "debug") {
        loadCSS("/css/bootstrap.css");
        loadCSS("/css/bbgm.css");
        loadCSS("/css/bbgm-notifications.css");
        loadCSS("/css/DT_bootstrap.css");
      } else {
        loadCSS("/gen/bbgm.css");
      }

      window.enableLogging = location.host.indexOf("basketball-gm.com") >= 0 && location.pathname.indexOf("/test") === -1;

      if (enableLogging) {
        // Google Analytics
        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-38759330-1']);
        _gaq.push(['_setDomainName', 'basketball-gm.com']);
        _gaq.push(['_trackPageview']);
        (function() {
          var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
          ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
          var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
        })();

        // Kentavious
        (function() {
          var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
          ga.src = 'http://basketball-gm.com/kentavious/kentavious.js';
          var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
        })();
      }
    </script>
  </head>

  <body>
    <script type="text/javascript">
      if (enableLogging) {
        var TriggerPrompt = function(articleUrl, contentId) {
          var ARTICLE_URL = articleUrl;
          var CONTENT_ID = contentId || '';
          var el = document.createElement('script');
          var url = 'http://survey.g.doubleclick.net/survey?site=5945171946504192' +
                    '&url=' + encodeURIComponent(ARTICLE_URL) +
                    (CONTENT_ID ? '&cid=' + encodeURIComponent(CONTENT_ID) : '') +
                    '&random=' + (new Date).getTime() +
                    '&after=1';
          el.setAttribute('src', url);
          var head = document.getElementsByTagName('head')[0] ||
              document.getElementsByTagName('body')[0];
          head.appendChild(el);
        };
      }
    </script>

    <nav class="navbar navbar-default navbar-fixed-top" role="navigation" id="top-menu">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="/"><img src="/ico/logo.png" width="18" height="18"><span class="hidden-md hidden-sm hidden-xs">Basketball GM</span><span class="visible-md visible-sm visible-xs" data-bind="if: lid() === undefined">Basketball GM</span></a>
          <ul class="nav navbar-nav-no-collapse" id="play-menu" data-no-collapse="true" data-bind="visible: lid() !== undefined" style="display: none">
            <li class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown" id="play-button-link" class="play-button">Play <b class="caret"></b></a>
              <ul class="dropdown-menu" data-bind="foreach: options" id="play-menu-options">
                <li><a data-bind="attr: {href: url, id: id}, html: label"></a></li>
              </ul>
            </li>
          </ul>
          <p class="navbar-text-two-line-no-collapse" data-no-collapse="true" data-bind="visible: lid() !== undefined" style="display: none">
            <span data-bind="text: phaseText"></span><br />
            <span data-bind="text: statusText"></span>
          </p>
        </div>
        <div class="collapse navbar-collapse navbar-ex1-collapse" id="top-menu-collapse">
          <ul class="nav navbar-nav navbar-right" id="nav-primary">
            <li data-bind="visible: lid() !== undefined" style="display: none"><a data-bind="attrLeagueUrl: {href: []}">Dashboard</a></li>
            <li class="dropdown" data-bind="visible: lid() !== undefined" style="display: none">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown"><span class="hidden-sm">League <b class="caret"></b></span><span class="visible-sm">L <b class="caret"></b></span></a>
              <ul class="dropdown-menu">
                <li class="dropdown-header visible-sm">League</li>
                <li><a data-bind="attrLeagueUrl: {href: ['standings']}">Standings</a></li>
                <li><a data-bind="attrLeagueUrl: {href: ['playoffs']}">Playoffs</a></li>
                <li><a data-bind="attrLeagueUrl: {href: ['league_finances']}">Finances</a></li>
                <li><a data-bind="attrLeagueUrl: {href: ['history']}">History</a></li>
              </ul>
            </li>
            <li class="dropdown" data-bind="visible: lid() !== undefined" style="display: none">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown"><span class="hidden-sm">Team <b class="caret"></b></span><span class="visible-sm">T <b class="caret"></b></span></a>
              <ul class="dropdown-menu">
                <li class="dropdown-header visible-sm">Team</li>
                <li><a data-bind="attrLeagueUrl: {href: ['roster']}">Roster</a></li>
                <li><a data-bind="attrLeagueUrl: {href: ['schedule']}">Schedule</a></li>
                <li><a data-bind="attrLeagueUrl: {href: ['team_finances']}">Finances</a></li>
                <li><a data-bind="attrLeagueUrl: {href: ['team_history']}">History</a></li>
              </ul>
            </li>
            <li class="dropdown" data-bind="visible: lid() !== undefined" style="display: none">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown"><span class="hidden-sm">Players <b class="caret"></b></span><span class="visible-sm">P <b class="caret"></b></span></a>
              <ul class="dropdown-menu">
                <li class="dropdown-header visible-sm">Players</li>
                <li><a data-bind="attrLeagueUrl: {href: ['free_agents']}">Free Agents</a></li>
                <li><a data-bind="attrLeagueUrl: {href: ['trade']}">Trade</a></li>
                <li><a data-bind="attrLeagueUrl: {href: ['trading_block']}">Trading Block</a></li>
                <li><a data-bind="attrLeagueUrl: {href: ['draft']}">Draft</a></li>
                <li><a data-bind="attrLeagueUrl: {href: ['watch_list']}">Watch List</a></li>
                <li><a data-bind="attrLeagueUrl: {href: ['hall_of_fame']}">Hall of Fame</a></li>
              </ul>
            </li>
            <li class="dropdown" data-bind="visible: lid() !== undefined" style="display: none">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown"><span class="hidden-sm">Stats <b class="caret"></b></span><span class="visible-sm">S <b class="caret"></b></span></a>
              <ul class="dropdown-menu">
                <li class="dropdown-header visible-sm">Stats</li>
                <li><a data-bind="attrLeagueUrl: {href: ['game_log']}">Game Log</a></li>
                <li><a data-bind="attrLeagueUrl: {href: ['leaders']}">League Leaders</a></li>
                <li><a data-bind="attrLeagueUrl: {href: ['player_ratings']}">Player Ratings</a></li>
                <li><a data-bind="attrLeagueUrl: {href: ['player_stats']}">Player Stats</a></li>
                <li><a data-bind="attrLeagueUrl: {href: ['team_stats']}">Team Stats</a></li>
              </ul>
            </li>
            <li class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown"><span class="hidden-sm">Tools <b class="caret"></b></span><span class="visible-sm">X <b class="caret"></b></span></a>
              <ul class="dropdown-menu">
                <li class="dropdown-header visible-sm">Tools</li>
                <li data-bind="visible: lid() !== undefined" style="display: none"><a data-bind="attrLeagueUrl: {href: ['create_a_player']}">Create A Player</a></li>
                <li data-bind="visible: lid() !== undefined" style="display: none"><a data-bind="attrLeagueUrl: {href: ['edit_team_info']}">Edit Team Info</a></li>
                <li data-bind="visible: lid() !== undefined" style="display: none"><a data-bind="attrLeagueUrl: {href: ['event_log']}">Event Log</a></li>
                <li data-bind="visible: lid() !== undefined" style="display: none"><a data-bind="attrLeagueUrl: {href: ['export_rosters']}">Export Rosters</a></li>
                <li data-bind="visible: lid() !== undefined" style="display: none"><a data-bind="attrLeagueUrl: {href: ['fantasy_draft']}">Fantasy Draft</a></li>
                <li data-bind="visible: lid() !== undefined" style="display: none"><a data-bind="attrLeagueUrl: {href: ['delete_old_data']}">Improve Performance</a></li>
                <li data-bind="visible: lid() !== undefined" style="display: none" role="presentation" class="divider"></li>
                <li role="presentation" class="dropdown-header">Use at your own risk!</li>
                <li data-bind="visible: lid() !== undefined" style="display: none"><a href="" onclick="(function () { g = require('globals'); season = require('core/season'); season.newPhase(g.PHASE.PLAYOFFS); }())">Skip To Playoffs</a></li>
                <li data-bind="visible: lid() !== undefined" style="display: none"><a href="" onclick="(function () { g = require('globals'); season = require('core/season'); season.newPhase(g.PHASE.BEFORE_DRAFT); }())">Skip To Before Draft</a></li>
                <li data-bind="visible: lid() !== undefined" style="display: none"><a href="" onclick="(function () { g = require('globals'); season = require('core/season'); season.newPhase(g.PHASE.AFTER_DRAFT); }())">Skip To After Draft</a></li>
                <li data-bind="visible: lid() !== undefined" style="display: none"><a href="" onclick="(function () { g = require('globals'); season = require('core/season'); season.newPhase(g.PHASE.PRESEASON); }())">Skip To Preseason</a></li>
                <li data-bind="visible: lid() !== undefined" style="display: none"><a href="" onclick="(function () { draft = require('core/draft'); draft.untilUserOrEnd(); }())">Force Resume Draft</a></li>
                <li><a href="" onclick="toggleDebugMode()" id="toggle-debug-mode">Toggle Debug Mode</a></li>
                <li><a href="" onclick="resetDb()">Reset DB</a></li>
              </ul>
            </li>
            <li class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown"><span class="hidden-sm">Help <b class="caret"></b></span><span class="visible-sm">? <b class="caret"></b></span></a>
              <ul class="dropdown-menu">
                <li class="dropdown-header visible-sm">Help</li>
                <li><a href="/manual">Overview</a></li>
                <li><a href="/changes">Changes</a></li>
                <li><a href="/manual/custom_rosters">Custom Rosters</a></li>
                <li><a href="http://basketball-gm.com/manual/debugging/" target="_blank">Debugging</a></li>
              </ul>
            </li>
          </ul>
        </div>
      </div>
    </nav>

    <div class="container">
      <div id="content" data-id-loading="" data-id-loaded="">
        <h1>Loading...</h1>
        <p>This should only take a couple seconds on a fast connection.</p>
      </div>

      <p class="clearfix"></p>
      <hr>

      <footer>
        <p>
          <a href="http://basketball-gm.com/about/" target="_blank">About</a> · 
          <a href="http://basketball-gm.com/advertise/" target="_blank">Advertise</a> · 
          <a href="http://basketball-gm.com/blog/" target="_blank">Blog</a> · 
          <a href="http://basketball-gm.com/contact/" target="_blank">Contact</a> · 
          <a href="http://basketball-gm.com/share/" target="_blank">Share</a><br>
          <p class="rev">v3.3 · <!--rev-->2014.02.19.1153</p>
        </p>
      </footer>
    </div>

    <div class="slide-out hidden-xs" id="share">
      <button class="slide-out-handle btn btn-danger">Share</button>
      <a href="https://twitter.com/basketball_gm" class="twitter-follow-button" data-show-count="true">Follow @basketball_gm</a>

      <a href="https://twitter.com/share" class="twitter-share-button" data-url="http://www.basketball-gm.com/" data-text="Free basketball management simulation game" data-via="basketball_gm">Tweet</a>

      <div id="fb-root"></div>
      <div class="fb-like" data-href="http://www.basketball-gm.com/" data-send="false" data-layout="button_count" data-width="90" data-show-faces="false"></div>
      <br>

      <div class="g-plusone" data-size="medium" data-href="http://www.basketball-gm.com/"></div>
      <br>

      <div id="subreddit-btn"></div>

      <div id="chrome-web-store"></div>
    </div>

    <div class="slide-out hidden-xs" id="feedback">
      <button class="slide-out-handle btn btn-danger">Feedback</button>
      <p><a href="https://twitter.com/basketball_gm" target="_blank">Tweet</a>, <a href="mailto:commissioner@basketball-gm.com">send an email</a> (commissioner@basketball-gm.com), or <a href="http://www.reddit.com/r/BasketballGM/" target="_blank">join the discussion on Reddit</a>.</p>
      <p>All thoughts, comments, and suggestions are appreciated!</p>
    </div>

    <iframe style="display: none;" src="/manifest_hack"></iframe> 

    <script>
      // Tools > Reset DB
      function resetDb() {
        var db;

        if (window.confirm("Are you sure you want to reset the database? This will delete all your current saved games.")) {
          db = require("db");
          db.reset();
        }
      }

      // Tools > Toggle Debug Mode
      if (localStorage.debug === "debug") {
        document.getElementById("toggle-debug-mode").innerHTML = "Disable Debug Mode";
      } else {
        document.getElementById("toggle-debug-mode").innerHTML = "Enable Debug Mode";
      }
      function toggleDebugMode() {
        if (localStorage.debug === "debug") {
          localStorage.debug = "";
        } else {
          localStorage.debug = "debug";
        }
        location.reload();
      }

      // Load either compiled script or RequireJS loader
      var body = document.getElementsByTagName('body').item(0);
      var script = document.createElement('script');
      script.type = 'text/javascript';
      if (localStorage.debug === "debug") {
        console.log("If you want better performance, click Tools > Disable Debug Mode.");
        script.src = "/js/lib/require.js";
        script.dataset.main = "/js/app.js";
      } else {
        console.log("If you want to see accurate error messages, click Tools > Enable Debug Mode.");
        script.src = "/gen/app.js";
      }
      body.appendChild(script);
    </script>
  </body>
</html>