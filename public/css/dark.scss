@use "sass:math";

// ============================================
// shadcn-inspired Dark Mode Theme
// Modern, sleek dark design with improved contrast
// ============================================

// These are so clicking on an element in one of the top navbar dropdown lists does not flash blue
$dropdown-link-active-color: #fff; // Matches hover
$dropdown-link-active-bg: #27272a; // Zinc-800 for modern feel

// For datatable.scss
$sorting-highlight-bg: #27272a; // Zinc-800

// Modern dark color palette inspired by shadcn/ui
$white: #09090b; // Almost black background (zinc-950)
$gray-100: #18181b; // zinc-900
$gray-200: #27272a; // zinc-800
$gray-300: #3f3f46; // zinc-700
$gray-400: #71717a; // zinc-500
$gray-500: #a1a1aa; // zinc-400
$gray-600: #d4d4d8; // zinc-300
$gray-700: #e4e4e7; // zinc-200
$gray-800: #fafafa; // zinc-50
$gray-900: #fafafa; // zinc-50
$black: #fafafa; // Near-white text

// Modern vibrant colors
$blue: #60a5fa; // blue-400
$indigo: #a78bfa; // violet-400
$purple: #c084fc; // purple-400
$pink: #f472b6; // pink-400
$red: #f87171; // red-400
$orange: #fb923c; // orange-400
$yellow: #fbbf24; // amber-400
$green: #4ade80; // green-400
$teal: #2dd4bf; // teal-400
$cyan: #22d3ee; // cyan-400

// Primary is a warm orange for brand identity
$primary: $orange;
$secondary: $gray-300;
$body-secondary-color: $gray-400;
$input-placeholder-color: $gray-400;

$table-bg-scale: 70%;
$table-hover-bg-factor: 0.1;

$border-color: $gray-200;

// Contrast for dark mode
$min-contrast-ratio: 3;

$small-scrollbar-thumb-color: $gray-300;
$small-scrollbar-thumb-hover-color: $gray-400;

@import "light";

// Copied from Bootstrap 5.2, mostly
$alert-bg-scale: 70%;
$alert-border-scale: 60%;
@each $state, $value in $theme-colors {
	$alert-background: shift-color($value, $alert-bg-scale);
	$alert-border: shift-color($value, $alert-border-scale);
	$alert-color: shift-color($value, $alert-color-scale);

	@if (contrast-ratio($alert-background, $alert-color) < $min-contrast-ratio) {
		$alert-color: mix(
			$value,
			color-contrast($alert-background),
			math.abs($alert-color-scale)
		);
	}
	.alert-#{$state} {
		--#{$prefix}alert-color: #{$alert-color};
		--#{$prefix}alert-bg: #{$alert-background};
		--#{$prefix}alert-border-color: #{$alert-border};
		--#{$prefix}alert-link-color: #{$alert-color};
	}
}
$list-group-item-bg-scale: 70%;
@mixin list-group-item-variant($state, $background, $color) {
	.list-group-item-#{$state} {
		color: $color !important;
		background-color: $background !important;
		border: var(--bs-border-width) solid var(--bs-border-color) !important;

		&.list-group-item-action {
			&:hover,
			&:focus {
				color: $color !important;
				background-color: shade-color($background, 10%) !important;
			}

			&.active {
				color: $white !important;
				background-color: $color !important;
				border-color: $color !important;
			}
		}
	}
}
@each $state, $value in $theme-colors {
	$list-group-variant-bg: shift-color($value, $list-group-item-bg-scale);
	$list-group-variant-color: shift-color($value, $list-group-item-color-scale);
	@if (
		contrast-ratio($list-group-variant-bg, $list-group-variant-color) <
			$min-contrast-ratio
	) {
		$list-group-variant-color: mix(
			$value,
			color-contrast($list-group-variant-bg),
			math.abs($list-group-item-color-scale)
		);
	}

	@include list-group-item-variant(
		$state,
		$list-group-variant-bg,
		$list-group-variant-color
	);
}

// ============================================
// Modern Button Styles - shadcn inspired
// Subtle shadows, smooth transitions, better focus states
// ============================================

.btn {
	color: $black;
	transition: all 0.2s ease;
	border-radius: 0.5rem;

	&:hover {
		color: $black;
		transform: translateY(-1px);
	}

	&:active {
		transform: translateY(0);
	}

	&:focus-visible {
		outline: 2px solid $primary;
		outline-offset: 2px;
	}

	&:disabled {
		color: $gray-500;
		opacity: 0.5;
	}
}

.btn-link,
.btn-link:hover {
	color: $primary;
}

.text-danger {
	color: $red !important;
}

.btn-danger {
	border-color: rgba($red, 0.8);
	background-color: rgba($red, 0.15);
	color: $red !important;
	box-shadow: 0 0 0 1px rgba($red, 0.3);

	&:active,
	&:focus,
	&:not(:disabled):hover {
		border-color: $red !important;
		background-color: rgba($red, 0.25) !important;
		color: $red !important;
		box-shadow: 0 0 12px rgba($red, 0.3);
	}
}

// btn-danger dropdown text color while clicking an item
.btn-danger:not(:disabled):not(.disabled):active,
.btn-danger:not(:disabled):not(.disabled).active,
.show > .btn-danger.dropdown-toggle {
	color: $black !important;
	background-color: $red !important;
}

.btn-primary {
	border-color: transparent;
	background-color: $orange;
	color: #09090b !important;
	font-weight: 500;
	box-shadow: 0 1px 3px rgba(0, 0, 0, 0.3), 0 0 0 1px rgba($orange, 0.2);

	&:active,
	&:focus,
	&:not(:disabled):hover {
		border-color: transparent !important;
		background-color: lighten($orange, 5%) !important;
		box-shadow: 0 4px 12px rgba($orange, 0.4);
	}
}

.btn-secondary {
	background-color: $gray-200;
	border-color: $gray-300;
	color: $black !important;

	&:active,
	&:focus,
	&:not(:disabled):hover {
		background-color: $gray-300 !important;
		border-color: $gray-400 !important;
	}
}

.btn-outline-primary {
	border-color: $gray-300;
	color: $black !important;
	background-color: transparent;

	&:active,
	&:focus,
	&:not(:disabled):hover {
		background-color: $gray-200 !important;
		border-color: $gray-400 !important;
		color: $black !important;
	}
}

.btn-light-bordered,
.btn-light-bordered-2 {
	color: $black !important;
	background-color: $gray-100;
	border-color: $gray-200;

	&:disabled {
		color: $gray-500 !important;
	}

	&:active,
	&:focus,
	&:not(:disabled):hover {
		background-color: $gray-200 !important;
		border-color: $gray-300 !important;
		color: $black !important;
	}
}

.bg-danger {
	background-color: darken($red, 20) !important;
}

.bg-secondary {
	background-color: $gray-400 !important;
	color: $white !important;
}

.bg-danger,
.bg-darkblue,
.bg-primary,
.bg-success {
	color: $black !important;
}
.bg-warning,
.bg-orange,
.bg-info {
	color: $white !important;
}

.notification,
.notification-close-all {
	box-shadow: #444 0 0 12px;
}

.god-mode,
.sidebar a.god-mode,
select.god-mode:focus {
	background-color: darken($purple, 20);
	color: $black;
}
a.god-mode,
.sidebar a.god-mode {
	&:hover {
		background-color: darken($purple, 10);
		color: $black;
		text-decoration: none;
	}
}
a.god-mode.active {
	background-color: darken($purple, 10);
	color: $black;
}
.sidebar a.god-mode.active {
	background-color: darken($purple, 10);
	color: $primary;
}

.play-button-success {
	background-color: $green;
	color: #09090b !important;

	&:hover,
	&:active,
	&:focus {
		background-color: lighten($green, 5%);
		box-shadow: 0 4px 12px rgba($green, 0.4);
	}
}

.btn-success {
	border-color: transparent;
	background-color: $green;
	color: #09090b !important;
	font-weight: 500;
	box-shadow: 0 1px 3px rgba(0, 0, 0, 0.3);

	&:active,
	&:focus,
	&:not(:disabled):hover {
		border-color: transparent !important;
		background-color: lighten($green, 5%) !important;
		color: #09090b !important;
		box-shadow: 0 4px 12px rgba($green, 0.4);
	}
}

.bg-success {
	background-color: rgba($green, 0.15) !important;
	color: $green !important;
}

.btn-god-mode {
	@include button-variant(
		darken($purple, 20),
		darken($purple, 20),
		$black,
		darken($purple, 27),
		darken($purple, 27)
	);

	&:active,
	&:focus,
	&:not(:disabled):hover {
		color: $black !important;
	}
}

.btn-outline-god-mode {
	@include button-variant(darken($purple, 20), $gray-400);

	&:active,
	&:focus,
	&:not(:disabled):hover {
		color: $black !important;
	}
}

.alert-god-mode {
	background-color: darken($purple, 45) !important;
}

@keyframes oscillate-bg {
	0% {
		background-color: darken($success, 20);
	}

	50% {
		background-color: lighten($success, 20);
	}

	100% {
		background-color: darken($success, 20);
	}
}

// Keeping ::after for dark mode only cause I couldn't get it to look quite right otherwise. Ideally would fix by having a separate PNG for dark mode
table.table thead .sorting {
	background: unset;
}
table.table thead .sorting::after {
	content: "";
	background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAATCAYAAAByUDbMAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAu0lEQVR4nMXUMQqDQBCF4U2jEMgp0nkGmxzD0trae8QDeI9UXsS/s7dIE0wzQRhhWYQw64YU02zxscy8GSciLlW5n2OAX2fgDmT+u0RiLfAGmqNYAUyAACNwjcVOQK/QVp2+m7EbMAfYEyit2AUYAmirB5BbsBpYgNdOLUD1t5xVX35WW7Bce7PXs2HtqXWapU7Ph2adclTOugDrY3PmNPGjQpNuhDuym43uZpti0TO9Guv1sGNJcxaLfQBK2D1y8JFl2wAAAABJRU5ErkJggg==)
		no-repeat center right;
	top: 0;
	left: 0;
	bottom: 0;
	right: 0;
	position: absolute;
	opacity: 0.4;
}

@keyframes fadeIn {
	from {
		opacity: 0;
	}

	to {
		opacity: 0.92;
	}
}

@keyframes fadeOut {
	from {
		opacity: 0.92;
	}

	to {
		opacity: 0;
	}
}

.dark-select__control {
	background-color: $white !important;
	border-color: var(--bs-border-color) !important;
}
.dark-select__control--is-focused {
	border-color: $primary !important;
	box-shadow: $primary 0 0 1px !important;
}
.dark-select__single-value {
	color: $black !important;
}
.dark-select__input {
	color: $black !important;
}

.dark-select__menu-list {
	background-color: $white !important;
	color: $black !important;
}
.dark-select__indicator svg {
	color: $gray-300 !important;
	&:not(:disabled):hover {
		color: $gray-400 !important;
	}
}
.dark-select__indicator-separator {
	background-color: $gray-300 !important;
}
.dark-select__option {
	background-color: $white;
	color: $black !important;
}
.dark-select__option--is-selected {
	// Keep in sync with btn-primary
	background-color: darken($orange, 25) !important;
}
.dark-select__option--is-selected:hover {
	// Keep in sync with btn-primary
	background-color: darken($orange, 30) !important;
	color: $black !important;
}

// Without this, the background flashes white on fast scroll
.dark-select__menu {
	background-color: $white !important;
}

.dark-select__multi-value {
	background-color: $gray-200 !important;
}
.dark-select__multi-value__label {
	color: $black !important;
}
.dark-select__multi-value__remove {
	// !important would override hover
	color: $black;
}

.modal-backdrop.show {
	opacity: 0.25; /* otherwise it is blindingly bright */
}

.new_window {
	stroke: #fff;
}

.dropdown-select {
	background-image: url("data:image/svg+xml;charset=US-ASCII,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%22200%22%20height%3D%22100%22%3E%3Cpath%20fill%3D%22%23fff%22%20d%3D%22M%200%2C0%20L%20100%2C100%20L%20200%2C0%20z%22%2F%3E%3C%2Fsvg%3E");
}

:root {
	--gradient-base-danger: #{derive-rgb-values-from-hex(darken($danger, 25%))};
	--gradient-base-success: #{derive-rgb-values-from-hex(darken($success, 25%))};
}

.chart-axis {
	line,
	path {
		stroke: lighten($secondary, 30%);
	}

	text {
		fill: lighten($secondary, 30%);
	}
}

#basketball-gm_mobile_leaderboard,
#football-gm_mobile_leaderboard,
#zen-gm_mobile_leaderboard {
	background-color: rgba(33, 37, 41, 0.8);
}

// For sortable table handles - otherwise it's just black, needs manual override. This breaks hover though :(
.table-secondary {
	background-color: $gray-100 !important;
	--bs-table-bg: $gray-100 !important;
}

$highlight-leader-color: lighten($yellow, 18%);
.highlight-leader {
	color: $highlight-leader-color;

	// Override these colors for +/- stats and game high links
	.text-success,
	.text-danger,
	a {
		color: $highlight-leader-color !important;
	}
}

// https://github.com/uiwjs/react-color?tab=readme-ov-file#support-darknight-theme
.w-color-sketch {
	--sketch-background: #18181b !important;
}
.w-color-swatch {
	--sketch-swatch-border-top: 1px solid #27272a !important;
}
.w-color-editable-input {
	--editable-input-label-color: #71717a !important;
	--editable-input-box-shadow: #3f3f46 0px 0px 0px 1px inset !important;
	--editable-input-color: #fafafa !important;
	--editable-input-label-color: #a1a1aa !important;
}

// ============================================
// Global Dark Mode Enhancements - shadcn inspired
// ============================================

// Smoother scrolling and transitions
html {
	scroll-behavior: smooth;
}

// Better focus states globally
*:focus-visible {
	outline: 2px solid $primary;
	outline-offset: 2px;
}

// Modern card styling
.card {
	background-color: $gray-100;
	border: 1px solid $gray-200;
	border-radius: 0.75rem;
	box-shadow: 0 1px 3px rgba(0, 0, 0, 0.3);
	transition: box-shadow 0.2s ease, transform 0.2s ease;

	&:hover {
		box-shadow: 0 4px 12px rgba(0, 0, 0, 0.4);
	}
}

.card-header {
	background-color: rgba($gray-200, 0.5);
	border-bottom: 1px solid $gray-200;
	border-radius: 0.75rem 0.75rem 0 0;
}

.card-footer {
	background-color: rgba($gray-200, 0.5);
	border-top: 1px solid $gray-200;
}

// Modern modal styling
.modal-content {
	background-color: $gray-100;
	border: 1px solid $gray-200;
	border-radius: 0.75rem;
	box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
}

.modal-header {
	border-bottom: 1px solid $gray-200;
}

.modal-footer {
	border-top: 1px solid $gray-200;
}

.modal-backdrop.show {
	opacity: 0.6;
	backdrop-filter: blur(4px);
}

// Better form inputs
.form-control {
	background-color: $white;
	border: 1px solid $gray-200;
	color: $black;
	border-radius: 0.5rem;
	transition: border-color 0.2s ease, box-shadow 0.2s ease;

	&:focus {
		background-color: $white;
		border-color: $primary;
		box-shadow: 0 0 0 3px rgba($primary, 0.15);
		color: $black;
	}

	&::placeholder {
		color: $gray-400;
	}
}

.form-select {
	background-color: $white;
	border: 1px solid $gray-200;
	color: $black;
	border-radius: 0.5rem;

	&:focus {
		background-color: $white;
		border-color: $primary;
		box-shadow: 0 0 0 3px rgba($primary, 0.15);
	}
}

// Better dropdown menus
.dropdown-menu {
	background-color: $gray-100;
	border: 1px solid $gray-200;
	border-radius: 0.5rem;
	box-shadow: 0 10px 25px rgba(0, 0, 0, 0.4);
	padding: 0.25rem;
}

.dropdown-item {
	border-radius: 0.375rem;
	color: $black;
	transition: background-color 0.15s ease;

	&:hover,
	&:focus {
		background-color: $gray-200;
		color: $black;
	}
}

.dropdown-divider {
	border-color: $gray-200;
	margin: 0.25rem 0;
}

// Better tables
.table {
	--bs-table-bg: transparent;
	--bs-table-hover-bg: #{$gray-100};
	border-color: $gray-200;
}

.table > thead {
	background-color: $gray-100;
}

.table > tbody > tr {
	transition: background-color 0.15s ease;
}

// Better alerts
.alert {
	border-radius: 0.5rem;
	border: 1px solid;
}

.alert-info {
	background-color: rgba($cyan, 0.1);
	border-color: rgba($cyan, 0.3);
	color: $cyan;
}

.alert-warning {
	background-color: rgba($yellow, 0.1);
	border-color: rgba($yellow, 0.3);
	color: $yellow;
}

.alert-danger {
	background-color: rgba($red, 0.1);
	border-color: rgba($red, 0.3);
	color: $red;
}

.alert-success {
	background-color: rgba($green, 0.1);
	border-color: rgba($green, 0.3);
	color: $green;
}

// Better badges
.badge {
	font-weight: 500;
	border-radius: 0.375rem;
}

// Better navigation
.nav-tabs {
	border-bottom: 1px solid $gray-200;
}

.nav-tabs .nav-link {
	border-radius: 0.5rem 0.5rem 0 0;
	color: $gray-500;
	transition: color 0.15s ease, background-color 0.15s ease;

	&:hover {
		color: $black;
		background-color: $gray-200;
		border-color: transparent;
	}

	&.active {
		background-color: $gray-100;
		border-color: $gray-200 $gray-200 $gray-100;
		color: $black;
	}
}

.nav-pills .nav-link {
	border-radius: 0.5rem;
	color: $gray-500;

	&:hover {
		background-color: $gray-200;
		color: $black;
	}

	&.active {
		background-color: $primary;
		color: #09090b;
	}
}

// Sidebar enhancements
.sidebar {
	background-color: $white;
	border-right: 1px solid $gray-200;
}

// Navbar enhancements
.navbar {
	background-color: rgba($white, 0.95) !important;
	backdrop-filter: blur(8px);
	border-bottom: 1px solid $gray-200;
}

// Progress bars
.progress {
	background-color: $gray-200;
	border-radius: 0.5rem;
	overflow: hidden;
}

.progress-bar {
	background-color: $primary;
	transition: width 0.3s ease;
}

// Tooltips
.tooltip-inner {
	background-color: $gray-100;
	border: 1px solid $gray-200;
	color: $black;
	border-radius: 0.375rem;
	box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
}

// List groups
.list-group-item {
	background-color: $gray-100;
	border-color: $gray-200;
	color: $black;

	&:hover {
		background-color: $gray-200;
	}
}

// Pagination
.page-link {
	background-color: $gray-100;
	border-color: $gray-200;
	color: $black;

	&:hover {
		background-color: $gray-200;
		border-color: $gray-300;
		color: $black;
	}
}

.page-item.active .page-link {
	background-color: $primary;
	border-color: $primary;
	color: #09090b;
}

.page-item.disabled .page-link {
	background-color: $gray-100;
	color: $gray-400;
}

// Subtle glow effects for interactive elements
a:not(.btn):hover {
	text-decoration-color: rgba($primary, 0.5);
}

// Better scrollbars (webkit)
::-webkit-scrollbar {
	width: 10px;
	height: 10px;
}

::-webkit-scrollbar-track {
	background: $white;
}

::-webkit-scrollbar-thumb {
	background: $gray-300;
	border-radius: 5px;

	&:hover {
		background: $gray-400;
	}
}

// Selection color
::selection {
	background-color: rgba($primary, 0.3);
	color: $black;
}
