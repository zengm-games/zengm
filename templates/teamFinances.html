<div data-bind="dropdown: 'team-finances'"></div>

<h1><span data-bind="text: team.region"></span> <span data-bind="text: team.name"></span> Finances <span data-bind="newWindow: []"></span></h1>
<p>More: <a data-bind="attrLeagueUrl: {href: ['roster', abbrev]}">Roster</a> | <a data-bind="attrLeagueUrl: {href: ['game_log', abbrev]}">Game Log</a> | <a data-bind="attrLeagueUrl: {href: ['team_history', abbrev]}">History</a></p>

<p class="clearfix">The current payroll (<strong data-bind="currency: [team.payroll, 'M']"></strong>) is <span data-bind="text: aboveBelow.minPayroll"></span> the minimum payroll limit (<strong data-bind="currency: [minPayroll, 'M']"></strong>), <span data-bind="text: aboveBelow.salaryCap"></span> the salary cap (<strong data-bind="currency: [salaryCap, 'M']"></strong>), and <span data-bind="text: aboveBelow.luxuryPayroll"></span> the luxury tax limit (<strong data-bind="currency: [luxuryPayroll, 'M']"></strong>). <span class="glyphicon glyphicon-question-sign help-icon" id="help-payroll-limits" data-placement="bottom"></span></p>

<div class="row">
  <div class="col-md-3 col-sm-2">
    <h4>Wins</h4>
    <div id="bar-graph-won" class="bar-graph-small"></div><br><br>
    <span class="clickover"><h4>Hype <span class="glyphicon glyphicon-question-sign help-icon" id="help-hype" data-placement="right"></span></h4></span>
    <div id="bar-graph-hype" class="bar-graph-small"></div><br><br>
    <h4>Region Population</h4>
    <div id="bar-graph-pop" class="bar-graph-small"></div><br><br>
    <h4>Average Attendance</h4>
    <div id="bar-graph-att" class="bar-graph-small"></div>
  </div>
  <div class="col-md-4 col-sm-4">
    <h4>Revenue</h4>
    <div id="bar-graph-revenue" class="bar-graph-large"></div><br><br>
    <h4>Expenses</h4>
    <div id="bar-graph-expenses" class="bar-graph-large"></div><br><br>
    <h4>Cash</h4>
    <div id="bar-graph-cash" class="bar-graph-medium"></div>
  </div>
  <div class="col-md-5 col-sm-6">
    <form method="POST" id="finances-settings" data-bind="attrLeagueUrl: {action: ['team_finances']}">
      <h4>Revenue Settings <span class="glyphicon glyphicon-question-sign help-icon" id="help-revenue-settings" data-placement="bottom"></span></h4>
      <p class="text-danger"></p>
      <div class="row">
        <div class="pull-left finances-settings-label">Ticket Price</div>
        <div class="input-group input-group-sm pull-left finances-settings-field">
          <span class="input-group-addon">$</span><input type="text" name="budget[ticketPrice]" class="form-control" disabled="disabled" data-bind="value: team.budget.ticketPrice.amount">
        </div>
        <div class="pull-left finances-settings-text">Leaguewide rank: #<span data-bind="text: team.budget.ticketPrice.rank"></span></div>
      </div>
      <p></p>
      <h4>Expense Settings <span class="glyphicon glyphicon-question-sign help-icon" id="help-expense-settings" data-placement="bottom"></span></h4>
      <p class="text-danger"></p>
      <div class="row">
        <div class="pull-left finances-settings-label">Scouting</div>
        <div class="input-group input-group-sm pull-left finances-settings-field">
          <span class="input-group-addon">$</span><input type="text" name="budget[scouting]" class="form-control" disabled="disabled" data-bind="value: team.budget.scouting.amount"><span class="input-group-addon">M</span>
        </div>
        <div class="pull-left finances-settings-text-small">Current spending rate: #<span data-bind="text: team.budget.scouting.rank"></span><br>Spent this season: #<span data-bind="text: team.expenses.scouting.rank"></span></div>
      </div>
      <div class="row">
        <div class="pull-left finances-settings-label">Coaching</div>
        <div class="input-group input-group-sm pull-left finances-settings-field">
          <span class="input-group-addon">$</span><input type="text" name="budget[coaching]" class="form-control" disabled="disabled" data-bind="value: team.budget.coaching.amount"><span class="input-group-addon">M</span>
        </div>
        <div class="pull-left finances-settings-text-small">Current spending rate: #<span data-bind="text: team.budget.coaching.rank"></span><br>Spent this season: #<span data-bind="text: team.expenses.coaching.rank"></span></div>
      </div>
      <div class="row">
        <div class="pull-left finances-settings-label">Health</div>
        <div class="input-group input-group-sm pull-left finances-settings-field">
          <span class="input-group-addon">$</span><input type="text" name="budget[health]" class="form-control" disabled="disabled" data-bind="value: team.budget.health.amount"><span class="input-group-addon">M</span>
        </div>
        <div class="pull-left finances-settings-text-small">Current spending rate: #<span data-bind="text: team.budget.health.rank"></span><br>Spent this season: #<span data-bind="text: team.expenses.health.rank"></span></div>
      </div>
      <div class="row">
        <div class="pull-left finances-settings-label">Facilities</div>
        <div class="input-group input-group-sm pull-left finances-settings-field">
          <span class="input-group-addon">$</span><input type="text" name="budget[facilities]" class="form-control" disabled="disabled" data-bind="value: team.budget.facilities.amount"><span class="input-group-addon">M</span>
        </div>
        <div class="pull-left finances-settings-text-small">Current spending rate: #<span data-bind="text: team.budget.facilities.rank"></span><br>Spent this season: #<span data-bind="text: team.expenses.facilities.rank"></span></div>
      </div>
      <br>
      <div class="row">
        <div class="pull-left finances-settings-label">&nbsp;</div>
        <div class="input-group input-group-sm pull-left finances-settings-field">
          <button class="btn btn-large btn-primary" style="line-height: 1.5em">
        </div>
      </div>
    </form>
  </div>
</div>
<p class="clearfix"></p>

<h2>Player Salaries</h2>

<p>You can release players from <a data-bind="attrLeagueUrl: {href: ['roster']}">your roster</a>. Released players who are still owed money are <i>shown in italics</i>.</p>

<div class="table-responsive">
  <table class="table table-striped table-bordered table-condensed" id="player-salaries">
    <thead>
      <tr>
        <th>Name</th>
        <!-- ko foreach: salariesSeasons -->
          <th data-bind="text: $data"></th>
        <!-- /ko -->
      </tr>
    </thead>
    <tbody>
    </tbody>
    <tfoot>
      <tr>
        <th>Totals</th>
        <!-- ko foreach: contractTotals -->
          <th data-bind="currency: [$data, 'M']"></th>
        <!-- /ko -->
      </tr>
    </tfoot>
  </table>
</div>